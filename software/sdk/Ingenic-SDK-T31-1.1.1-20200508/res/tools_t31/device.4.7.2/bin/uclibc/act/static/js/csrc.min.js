!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=arguments[3],e=arguments[4],f=arguments[5],g=JSON.stringify;b.exports=function(a){for(var b,c=Object.keys(f),h=0,i=c.length;h<i;h++){var j=c[h];if(f[j].exports===a){b=j;break}}if(!b){b=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var k={},h=0,i=c.length;h<i;h++){var j=c[h];k[j]=j}e[b]=[Function(["require","module","exports"],"("+a+")(self)"),k]}var l=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[b]=b,e[l]=[Function(["require"],"require("+g(b)+")(self)"),m];var n="("+d+")({"+Object.keys(e).map(function(a){return g(a)+":["+e[a][0]+","+g(e[a][1])+"]"}).join(",")+"},{},["+g(l)+"])",o=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(o.createObjectURL(new Blob([n],{type:"text/javascript"})))}},{}],2:[function(a,b,c){!function(){var a=document.querySelectorAll("template");if(0!==a.length){for(var b=!0,c=0;c<a.length;c++)if(0!==a[c].childNodes.length){b=!1;break}if(!b)for(var d=0;d<a.length;d++){for(var e=a[d].childNodes,f=0;f<e.length;f++)a[d].content.appendChild(e[f].cloneNode(!0));for(;a[d].hasChildNodes();)a[d].removeChild(a[d].childNodes[0])}}}()},{}],3:[function(a,b,c){String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}),String.prototype.padLeft||(String.prototype.padLeft=function(){"use strict";var a=arguments[0];if("string"==typeof a){if(null===this||void 0===this)return a;var b=a.length;return(a+this).slice(-b)}return this}),String.prototype.padRight||(String.prototype.padRight=function(){"use strict";var a=arguments[0];if("string"==typeof a){if(null===this||void 0===this)return a;var b=a.length;return(this+a).substring(0,b)}return this}),String.prototype.endsWith||(String.prototype.endsWith=function(a,b){var c=this.toString(),d=b;(void 0===b||b>c.length)&&(d=c.length),d-=a.length;var e=c.indexOf(a,d);return e!==-1&&e===d}),Math.log2=Math.log2||function(a){return Math.log(a)/Math.LN2}},{}],4:[function(a,b,c){function d(){i(".messages").innerHTML="",j=1,k={},l.forEach(URL.revokeObjectURL),l=[],Array.prototype.slice.call(i.$(".button")).forEach(function(a){a.classList.add("disabled")})}function e(a,b,c,d,e){return Promise.resolve(d()).then(function(d){var f=a+"-"+c,g=document.createElement("a");g.id=f,g.download=e||b+"."+a.toLowerCase(),g.textContent=e||a.toUpperCase(),k[f]=d;var h=URL.createObjectURL(d);return l.push(h),g.href=h,Promise.resolve(g)})}function f(a,b,c){var d=i("#template").content;d.querySelector(".fname").innerHTML=a,b&&d.querySelector(".clickable").setAttribute("ref",b);var e=d.cloneNode(!0),f=e.querySelector(".display");return c?(f.innerHTML=c,f.classList.add("error")):f.querySelector(".progress").setAttribute("ref",b),e}function g(a){var b=j++;return i(".messages").appendChild(f(a,b)),b}function h(a){return function(){i(".messages").appendChild(f(a,null,"unsupported format"))}}var i=a("../utils/helper"),j=1,k={},l=[];b.exports={cleanUp:d,nextId:g,getMessageEntry:f,getLink:e,unknownFormat:h,getBlobs:function(){return k}}},{"../utils/helper":6}],5:[function(a,b,c){function d(a){return function(b){var c=i.nextId(a),d=f('.progress[ref="'+c+'"]'),e=g(h);e.onmessage=function(b){var e=b.data;e.done?(d.value=100,i.getLink("c",a,c.toString(),function(){return new Blob([e.cpp],{type:"text/x-c"})},a.replace(/\.[^.]*$/,".c")).then(function(a){f('.clickable[ref="'+c+'"]').appendChild(a)}).catch(function(a){console.log(a)})):d.value=e.progress},e.onerror=function(a){var b=d.parentNode;b.innerHTML=a.message,b.classList.add("error")},e.postMessage([b.target.result,c,a])}}function e(){f("#file-select").addEventListener("change",function(a){i.cleanUp();for(var b=a.target.files||a.dataTransfer.files,c=0;c<b.length;c++){var e=b[c],f=new FileReader;f.onload=function(a){var b=a.name.toLowerCase();return b.endsWith(".json")?d(a.name):i.unknownFormat(a.name)}(e),f.readAsText(e)}},!1)}a("../fixme"),a("../polyfill");var f=a("../utils/helper"),g=a("webworkify"),h=a("../workers/jsn"),i=a("./cany");"complete"===document.readyState||"interactive"===document.readyState?e():document.addEventListener("DOMContentLoaded",e)},{"../fixme":2,"../polyfill":3,"../utils/helper":6,"../workers/jsn":7,"./cany":4,webworkify:1}],6:[function(a,b,c){b.exports=document.querySelector.bind(document),b.exports.$=document.querySelectorAll.bind(document)},{}],7:[function(a,b,c){var d=function(){var a=(new Date).getFullYear();return"/**\n *  This confidential and proprietary software/information may be used only\n *        as authorized by a licensing agreement from Apical Limited\n *\n *                   (C) COPYRIGHT "+a+" Apical Limited\n *                          ALL RIGHTS RESERVED\n *\n *       The entire notice above must be reproduced on all authorized\n *        copies and copies may only be made to the extent permitted\n *              by a licensing agreement from Apical Limited.\n *\n */ \n"},e=function(a){switch(a){case 1:return"uint8_t";case 2:return"uint16_t";case 4:return"uint32_t";default:throw new Error("Bad width of integer variable")}},f=function(a){var b="_"+a.name.toLowerCase(),c=parseInt(a.rows),d=parseInt(a.cols),f=parseInt(a.width),g=a.value,h="";a.hasOwnProperty("__comment")&&(h=a.__comment);var i,j;if(1==c)j=JSON.stringify(g).replace(/\[/g,"{").replace(/]/g,"}");else{var k=0;j=" {";for(var l=0;l<c;l++){i="\n  { ";for(var m=0;m<d;m++)i+=g[k]+", ",k+=1;i=i.replace(/, $/," },"),j+=i}j=j.replace(/,$/,"\n}")}var n="\n\n// "+h+"\nstatic "+e(f)+" "+b;return n+=1==c?"[ ]\n":"[ ]["+d+"]\n",n+=" = "+j+";"},g=function(){var a='#include "apical_calibrations_id.h"\n';return a+="\n"};b.exports=function(a){a.onmessage=function(b){var c=JSON.parse(b.data[0]),e=b.data[1],h=b.data[2],i=c.target,j=c.luts,k=d();k+="\n",k+=g(),k+="// created from "+h+" on "+(new Date).toISOString()+" UTC";for(var l=0,m=j.length;l<m;l++)k+=f(j[l]),a.postMessage({id:e,progress:40*l/m});var n,o,p,q,r,s;k+="\n";for(var t=0;t<m;t++)n=j[t],o=n.name.toLowerCase(),p=parseInt(n.rows),q=parseInt(n.cols),r=parseInt(n.width),s=n.value,k+=1==p?"\nstatic LookupTable "+o+" = { .ptr = _"+o+", .rows = "+p+", .cols = sizeof(_"+o+") / sizeof(_"+o+"[0]), .width = sizeof(_"+o+"[0] ) };":"\nstatic LookupTable "+o+" = { .ptr = _"+o+", .cols = "+q+", .rows = sizeof(_"+o+") / sizeof(_"+o+"[0]), .width = sizeof(_"+o+"[0][0] ) };",a.postMessage({id:e,progress:40+30*l/m});k+="\n\n",k+="uint32_t get_"+i.toLowerCase()+"_calibrations( ApicalCalibrations * c ) {\n",k+="    uint32_t result = 0;\n",k+="    if (c != 0) {\n";for(var u=0;u<m;u++)n=j[u],o=n.name.toLowerCase(),k+="        c->calibrations[_"+o.toUpperCase()+"] = &"+o+";\n",a.postMessage({id:e,progress:70+30*l/m});k+="    } else {\n",k+="        result = -1;\n",k+="    }\n",k+="    return result;\n",k+="}\n",a.postMessage({id:e,done:!0,file:h,cpp:k})}}},{}]},{},[5]);