/** This confidential and proprietary software/information may be used only
 *         as authorized by a licensing agreement from Apical Limited
 *                (C) COPYRIGHT 2013 - 2015 Apical Limited
 *                          ALL RIGHTS RESERVED
 *       The entire notice above must be reproduced on all authorized
 *        copies and copies may only be made to the extent permitted
 *              by a licensing agreement from Apical Limited.
 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=arguments[3],e=arguments[4],f=arguments[5],g=JSON.stringify;b.exports=function(a){for(var b,c=Object.keys(f),h=0,i=c.length;h<i;h++){var j=c[h];if(f[j].exports===a){b=j;break}}if(!b){b=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var k={},h=0,i=c.length;h<i;h++){var j=c[h];k[j]=j}e[b]=[Function(["require","module","exports"],"("+a+")(self)"),k]}var l=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[b]=b,e[l]=[Function(["require"],"require("+g(b)+")(self)"),m];var n="("+d+")({"+Object.keys(e).map(function(a){return g(a)+":["+e[a][0]+","+g(e[a][1])+"]"}).join(",")+"},{},["+g(l)+"])",o=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(o.createObjectURL(new Blob([n],{type:"text/javascript"})))}},{}],2:[function(a,b,c){function d(){var a=o.loadStarredRegisters();a.forEach(function(a){var b=n.$('.star-button[fav-name="'+a+'"]');Array.prototype.slice.call(b).forEach(j)}),a.length>0&&n("#toggle-fav-button").classList.remove("disabled")}function e(){for(var a,b,c,d=o.loadStarredPages(),e=0,f=d.length;e<f;e++)a=d[e].name,b=d[e].type,c=n('.section[section="'+a+'"][type='+b+"]"),c&&(c.querySelector(".like-page").classList.add("star-selected"),l(a,b))}function f(){for(var a=n.$(".star-button.star-selected[fav-name]"),b=new Set,c=0,d=a.length;c<d;c++)b.add(a[c].getAttribute("fav-name"));o.saveStarredRegisters(Array.from(b))}function g(){for(var a=n.$(".section-link.fav-menu-item[fav-name][type]"),b=[],c=0,d=a.length;c<d;c++)b.push({name:a[c].getAttribute("fav-name"),type:a[c].getAttribute("type")});o.saveStarredPages(b)}function h(){p.hideMenus(),Array.prototype.slice.call(n.$("div.container")).forEach(function(a){a.querySelector(".star-button.star-selected")?(a.classList.remove("hidden"),Array.prototype.slice.call(a.querySelectorAll("section.section")).forEach(function(a){if(a.querySelector(".star-button.star-selected")){a.classList.remove("hidden"),a.classList.add("in-common"),a.querySelector(".page-sub-menu").classList.add("hidden");var b=a.querySelectorAll("article.control-item");Array.prototype.slice.call(b).forEach(function(a){a.querySelector(".star-button.star-selected")?a.classList.remove("hidden"):a.classList.add("hidden")})}else a.classList.add("hidden")})):a.classList.add("hidden")}),document.dispatchEvent(new Event("act-reload-visible"))}function i(a){k(a),setTimeout(function(){var b=a.parentNode;b.classList.add("hidden");var c=b.parentNode;c.querySelector(".star-button.star-selected")||(c.classList.add("hidden"),n(".star-button.star-selected")||(n("#toggle-fav-button").classList.add("disabled"),setTimeout(p.returnToTab,200)))},300)}function j(a){a.classList.add("star-selected")}function k(a){a.classList.remove("star-selected")}function l(a,b){var c=n("."+b+"-fav-menu");if(c){var d=n("#fav-menu-item-template").content,e=d.querySelector(".section-link");e.setAttribute("fav-name",a),e.setAttribute("type",b),e.setAttribute("title",a),"dynamic"===b||"static"==b?e.querySelector("p").innerHTML=a.replace(/^CALIBRATION_/,""):e.querySelector("p").innerHTML=a;var f=c.querySelector(".menu-delimiter");c.insertBefore(d.cloneNode(!0),f),c.children.length>1&&(f.classList.contains("hidden")&&f.classList.remove("hidden"),c.classList.contains("hidden")&&c.classList.remove("hidden"))}}function m(a,b){var c=n("."+b+"-fav-menu");if(c){var d=c.querySelector('.section-link[fav-name="'+a+'"][type="'+b+'"]');if(d&&(c.removeChild(d),1===c.children.length)){var e=c.querySelector(".menu-delimiter");e.classList.add("hidden"),c.classList.add("hidden")}var f=n('.section[section="'+a+'"][type="'+b+'"]');f&&f.querySelector(".like-page").classList.remove("star-selected")}}var n=a("../utils/helper"),o=a("../utils/state"),p=a("../utils/handy"),q=function(){return null===n("#toggle-fav-button.star-selected")};b.exports={loaded:function(){return window.addEventListener("beforeunload",function(){o.mayBeforeUnload()&&(f(),g())}),document.addEventListener("click",function(a){if(0===a.button){var b,c=a.target,d=c.classList.contains("star-selected"),e=q();if(c.classList.contains("star-button"))e?a.shiftKey?Array.prototype.slice.call(n.$(".star-button.star-selected")).forEach(i):i(c):(a.shiftKey?Array.prototype.slice.call(n.$("div.container:not(.hidden)")).forEach(function(a){Array.prototype.slice.call(a.querySelectorAll("section.section:not(.hidden)")).forEach(function(a){var b=a.querySelectorAll(".star-button");d?Array.prototype.slice.call(b).forEach(k):Array.prototype.slice.call(b).forEach(j)})}):d?k(c):j(c),n(".star-button.star-selected")?n("#toggle-fav-button").classList.remove("disabled"):n("#toggle-fav-button").classList.add("disabled"));else if("toggle-fav-button"===c.id)e?(c.classList.add("star-selected"),setTimeout(p.returnToTab,50)):(c.classList.remove("star-selected"),h(),document.dispatchEvent(new Event("act-hide-reg-search")));else if(c.classList.contains("like-page")){c.classList.toggle("star-selected");var f=c.parentNode.parentNode.parentNode,g=f.getAttribute("section"),o=f.getAttribute("type");d?m(g,o):l(g,o)}else if(c.classList.contains("fav-menu-item"))b={detail:{name:c.getAttribute("fav-name")}},document.dispatchEvent(new CustomEvent("act-select-section",b));else if(c.classList.contains("fav-menu-anchor"))b={detail:{name:c.parentNode.getAttribute("fav-name")}},document.dispatchEvent(new CustomEvent("act-select-section",b));else if(c.classList.contains("fav-menu-toggle")){var r=c.parentNode;m(r.getAttribute("fav-name"),r.getAttribute("type"))}}}),document.addEventListener("act-clear-user-data",function(){var a=n.$(".star-button.star-selected");Array.prototype.slice.call(a).forEach(k),n("#toggle-fav-button").classList.add("disabled");var b=n.$(".like-page.star-selected");Array.prototype.slice.call(b).forEach(function(a){a.classList.remove("star-selected");var b=a.parentNode.parentNode.parentNode;m(b.getAttribute("section"),b.getAttribute("type"))})}),d(),e(),Promise.resolve()}}},{"../utils/handy":35,"../utils/helper":36,"../utils/state":39}],3:[function(a,b,c){var d=a("../utils/helper"),e=0;b.exports={loaded:function(){return document.addEventListener("act-error",function(a){var b=a.detail,c=d("#srv-status");c.classList.remove("srv-status-ok"),c.classList.add("srv-status-fail"),c.innerHTML=b.text;var f=d(".error-list"),g=d("#error-list-item-template").content,h=new Date;g.querySelector(".error-timestamp").innerHTML=h.toLocaleTimeString()+"."+h.getMilliseconds()+": ",g.querySelector(".error-message-content").innerHTML=b.text,f.insertBefore(g.cloneNode(!0),f.childNodes[0]);var i=d("#error-count");if(i.classList.contains("hidden")&&i.classList.remove("hidden"),e++,i.innerHTML=e+" errors",e>0){var j=d(".dialog-clear-btn.disabled");j&&j.classList.remove("disabled")}}),document.addEventListener("act-clear-errors",function(){e=0;var a=d("#error-count");a.innerHTML=e+" errors",a.classList.add("hidden")}),document.addEventListener("act-ok",function(){var a=d("#srv-status");a.classList.remove("srv-status-fail"),a.classList.add("srv-status-ok"),a.innerHTML="success"}),Promise.resolve()},ERROR:function(a){var b;b={detail:{text:a}},document.dispatchEvent(new CustomEvent("act-error",b))},FATAL:function(a){var b;b={detail:{text:a}},document.dispatchEvent(new CustomEvent("act-error",b))},OK:function(){document.dispatchEvent(new Event("act-ok"))}}},{"../utils/helper":36}],4:[function(a,b,c){function d(){j.hw={},j.api={},j.counter=0,j.interval=null}function e(){g.hwPoll(j.hw).catch(i.ERROR),g.fwPoll(j.api).catch(i.ERROR)}var f=a("../utils/helper"),g=a("../utils/ajax"),h=a("../utils/state"),i=a("../common/handler"),j=function(){};b.exports={loaded:function(){return d(),document.addEventListener("act-polling",function(a){var b=a.detail,c=b.control,g=b.type;if(c&&["hw","api"].indexOf(g)>=0){var i,k=j[g],l=c.getAttribute("command");switch(g){case"hw":i=l;break;case"api":var m=c.getAttribute("section");i=m+":"+l;break;default:return}var n;if(i in k)c.querySelector(".reload-button").classList.remove("polling"),delete k[i],j.counter--,n=f("#stop-polling-button"),f(".toolbar-text").innerHTML=j.counter?j.counter:"",j.counter<=0&&(clearInterval(j.interval),d(),n.classList.add("disabled"),n.classList.remove("polling"),n.innerHTML="");else{switch(c.querySelector(".reload-button").classList.add("polling"),g){case"hw":k[i]={type:c.getAttribute("reg-type"),offset:parseInt(c.getAttribute("offset")),size:parseInt(c.getAttribute("sz"))};break;case"api":k[i]={section:parseInt(c.getAttribute("section")),command:parseInt(l)};break;default:return}j.counter++,null===j.interval&&(j.interval=setInterval(e,h.getPollingPace()),n=f("#stop-polling-button"),n.classList.remove("disabled"),n.classList.add("polling")),f(".toolbar-text").innerHTML=j.counter?j.counter:""}}}),document.addEventListener("click",function(a){if(0===a.button){var b=a.target;"stop-polling-button"===b.id&&(clearInterval(j.interval),d(),f("#stop-polling-button").classList.add("disabled"),f(".toolbar-text").innerHTML="",Array.prototype.slice.call(f.$(".polling")).forEach(function(a){a.classList.remove("polling")}))}}),Promise.resolve()}}},{"../common/handler":3,"../utils/ajax":32,"../utils/helper":36,"../utils/state":39}],5:[function(a,b,c){function d(a){a.classList.remove("hidden"),a.parentNode.classList.add("frozen")}function e(a){a.classList.add("hidden"),a.parentNode.classList.remove("frozen")}function f(a,b,c){var d=10,e=" ",f=String.prototype.padRight,g=" ",h=b.querySelector(".array-table");h.classList.contains("hex")&&(a.classList.add("hex"),d=16,e="0",f=String.prototype.padLeft,g="  "),a.setAttribute("command",b.getAttribute("command")),a.setAttribute("type",b.getAttribute("type"));var i=parseInt(b.getAttribute("max")),j=i.toString(d).length,k=new Array(j+1).join(e);Array.isArray(c)?a.value=c.reduce(function(a,b,c){return a+((c>0?g:"")+f.apply(b.toString(d),[k]))},""):a.value=Array.prototype.slice.call(b.querySelectorAll(".array-cell")).reduce(function(a,b,c){return a+((c>0?g:"")+f.apply(b.innerHTML.toString(),[k]))},"")}var g=a("../utils/helper"),h=a("../utils/ajax"),i=a("../utils/calc"),j=a("../utils/state"),k=a("../common/handler");b.exports={loaded:function(){return document.addEventListener("click",function(a){if(0===a.button){var b,c,j,l,m,n,o,p=a.target;if(p.classList.contains("edit-array-button"))b=g(".popup.array-popup"),j=p.parentNode,c=b.querySelector(".array-spread-sheet"),f(c,j),b.querySelector(".popup-info").innerHTML=j.getAttribute("display-text"),d(b);else if(p.classList.contains("dialog-apply-btn")){b=g(".popup.array-popup"),c=b.querySelector(".array-spread-sheet");var q=c.value.toString().replace(/[\s,;\n]+/g,","),r=parseInt(c.hasAttribute("hex")?16:10);l=c.getAttribute("command"),m=c.getAttribute("type");var s;switch(m){case"hw":j=g('.control-item[command="'+l+'"][type=hw]'),o=parseInt(j.getAttribute("nodes")),n=parseInt(j.getAttribute("max")),s=q.split(",").splice(0,o).map(function(a){var b=parseInt(a,r);return isNaN(b)||b<0||b>n?0:b});var t=parseInt(j.getAttribute("bits")),u=parseInt(j.getAttribute("align"));h.hwWrite(null,j.getAttribute("reg-type"),parseInt(j.getAttribute("offset")),i.arrayToBytes(s,t,u)).then(function(a){var b;b={detail:{command:l,bytes:a}},document.dispatchEvent(new CustomEvent("act-hw-value-changed",b)),f(c,j,i.bytesToArray(a,t,u))}).catch(k.ERROR);break;case"static":case"dynamic":j=g('.control-item[command="'+l+'"][type="'+m+'"]'),n=parseInt(j.getAttribute("max")),o=parseInt(j.getAttribute("nodes")),s=q.split(",").splice(0,o).map(function(a){var b=parseInt(a,r);return isNaN(b)||b<0||b>n?0:b});var v=8*parseInt(j.getAttribute("sz")),w=parseInt(l),x=i.arrayToBytes(s,v,v);h.fwSaveArray(w,x).then(function(){var a;a={detail:{page:w,bytes:x}},document.dispatchEvent(new CustomEvent("act-calibration-value-changed",a)),f(c,j,i.bytesToArray(x,v,v))}).catch(k.ERROR)}}else if(p.classList.contains("dialog-reload-btn")){b=g(".popup.array-popup"),c=b.querySelector(".array-spread-sheet"),m=c.getAttribute("type"),l=c.getAttribute("command");var y;switch(m){case"hw":j=g('.control-item[command="'+l+'"][type=hw]'),y=parseInt(j.getAttribute("sz")),h.hwRead(null,j.getAttribute("reg-type"),parseInt(j.getAttribute("offset")),y).then(function(a){var b;b={detail:{command:l,bytes:a}},document.dispatchEvent(new CustomEvent("act-hw-value-changed",b));var d=parseInt(j.getAttribute("bits")),e=parseInt(j.getAttribute("align"));f(c,j,i.bytesToArray(a,d,e))}).catch(k.ERROR);break;case"static":case"dynamic":j=g('.control-item[command="'+l+'"][type="'+m+'"]'),n=parseInt(j.getAttribute("max")),o=parseInt(j.getAttribute("nodes")),y=parseInt(j.getAttribute("sz"));var z=parseInt(l);h.fwLoadArray(z,y*o).then(function(a){var b=8*y;f(c,j,i.bytesToArray(a,b,b))}).catch(k.ERROR)}}else if(p.classList.contains("dialog-clear-btn")){b=g(".popup:not(.hidden)");var A=g(".error-list");A&&(A.innerHTML="",p.classList.add("disabled"),document.dispatchEvent(new Event("act-clear-errors")))}else p.classList.contains("dialog-close-btn")&&(b=g(".popup:not(.hidden)"),e(b))}}),document.addEventListener("act-ask-user",function(a){var b=a.detail,c=b.question,f=b.yes,h=b.no;if("string"==typeof c&&"function"==typeof f&&"function"==typeof h){var i=g(".ask-user-popup");i.querySelector(".dialog-message").innerHTML=c;var j=i.querySelector(".dialog-yes-btn"),k=i.querySelector(".dialog-no-btn"),l=function(a){0===a.button&&(e(i),j.removeEventListener("click",l),k.removeEventListener("click",m),f())},m=function(a){0===a.button&&(e(i),j.removeEventListener("click",l),k.removeEventListener("click",m),h())};j.addEventListener("click",l),k.addEventListener("click",m),d(i)}}),document.addEventListener("act-popup-progress",function(a){var b=g(".progress-popup");b.querySelector(".dialog-message").innerHTML=a.detail,d(b)}),document.addEventListener("act-cover-progress",function(){var a=g(".progress-popup"),b=a.querySelector("#modal-progress");b.value=0,b.max=100,a.querySelector(".dialog-message").innerHTML="",e(a)}),document.addEventListener("act-popup-errors",function(){var a=g(".errors-popup");d(a)}),document.addEventListener("act-popup-settings",function(){var a,b=g(".settings-popup");a=b.querySelector("#cfg-fancy-json"),a.checked=j.fancyJSON(),a.setAttribute("original-value",j.fancyJSON().toString()),a=b.querySelector("#cfg-polling-pace"),a.value=j.getPollingPace(),a.setAttribute("original-value",j.getPollingPace().toString()),d(b)}),document.addEventListener("act-popup-about",function(){var a=g(".about-popup");h.get("/about").then(function(b){var c=g("#key-value-holder-template").content,e=c.querySelector(".key-value-holder").cloneNode(!0);a.querySelector(".dialog-content").innerHTML="",a.querySelector(".dialog-content").appendChild(e);var f=g("#key-value-item-template").content;for(var h in b)b.hasOwnProperty(h)&&(f.querySelector(".kv-item-name").innerHTML=h,f.querySelector(".kv-item-value").innerHTML=b[h],e.appendChild(f.cloneNode(!0)));d(a),k.OK()}).catch(function(b){e(a),k.ERROR(b)})}),Promise.resolve()}}},{"../common/handler":3,"../utils/ajax":32,"../utils/calc":33,"../utils/helper":36,"../utils/state":39}],6:[function(a,b,c){function d(){var a=f("#reg-search");a.value="",a.style.cursor="pointer",f("#clear-reg-search").classList.add("search-hidden"),f(".main-search-holder").classList.remove("long-search")}function e(){Array.prototype.slice.call(f.$(".menu")).forEach(function(a){a.classList.add("hidden")}),document.dispatchEvent(new Event("act-restore-menu"))}var f=a("../utils/helper"),g=a("../utils/handy"),h=/^[A-Za-z0-9\s\-_]*$/;b.exports={loaded:function(){return f("#reg-search").value="",f("#reg-search").addEventListener("focus",function(){var a=f("#reg-search");a.style.cursor="text",f(".main-search-holder").classList.add("long-search"),f("#clear-reg-search").classList.remove("search-hidden")}),f("#clear-reg-search").addEventListener("click",function(a){0===a.button&&(d(),f("#reg-search").dispatchEvent(new Event("input")))}),f("#reg-search").addEventListener("input",function(a){var b=a.target,c=b.value.toLowerCase().replace(/_/g," ").replace(/-/g," ");if(null===c.match(h))return void b.classList.add("bad-search");b.classList.remove("bad-search");var d=c.length;d>2?(g.hideMenus(),Array.prototype.slice.call(f.$("div.container")).forEach(function(a){var b='article.control-item[search*="'+c+'"]';a.querySelector(b)?(Array.prototype.slice.call(a.querySelectorAll("section.section")).forEach(function(a){a.querySelector(b)?(a.querySelector(".page-sub-menu").classList.add("hidden"),a.classList.add("in-common"),Array.prototype.slice.call(a.querySelectorAll("article.control-item")).forEach(function(a){var b=a.getAttribute("search");b.includes(c)?a.classList.remove("hidden"):a.classList.add("hidden")}),a.classList.remove("hidden")):a.classList.add("hidden")}),a.classList.remove("hidden")):a.classList.add("hidden")}),document.dispatchEvent(new Event("act-reload-visible"))):0===d&&setTimeout(g.returnToTab,50)}),f("#clear-menu-search").addEventListener("click",function(a){if(0===a.button){var b=f("#menu-search");b.value="",b.dispatchEvent(new Event("input"))}}),f("#menu-search").addEventListener("input",function(a){var b=a.target,c=b.value.toLowerCase().replace(/_/g," ").replace(/-/g," ");if(null===c.match(h))return void b.classList.add("bad-search");b.classList.remove("bad-search");var d=c.length;d>2?Array.prototype.slice.call(f.$(".menu:not(.hidden)")).forEach(function(a){a.querySelector('.section-link[search*="'+c+'"]')?(Array.prototype.slice.call(a.querySelectorAll(".section-link[search]")).forEach(function(a){var b=a.getAttribute("search");b.includes(c)?a.classList.remove("hidden"):a.classList.add("hidden")}),a.classList.remove("hidden")):a.classList.add("hidden")}):e()}),document.addEventListener("act-hide-reg-search",d),document.addEventListener("keydown",function(a){var b=a.target,c=a.keyCode||a.which;b.classList.contains("search")&&27===c&&(b.value="",b.dispatchEvent(new Event("input")))}),document.addEventListener("blur",function(a){var b=a.target;"classList"in b&&("reg-search"===b.id&&b.value.length<3?d():"menu-search"===b.id&&b.value.length<3&&e())},!0),Promise.resolve()}}},{"../utils/handy":35,"../utils/helper":36}],7:[function(a,b,c){var d=a("../utils/helper"),e=a("../utils/state");b.exports={loaded:function(){return document.addEventListener("change",function(a){var b=a.target;if(b.classList.contains("tab-radio")&&b.checked){var c=b.value;Array.prototype.slice.call(d.$(".container:not(."+c+"-controls):not(.hidden)")).forEach(function(a){a.classList.add("hidden")});var f=d(".container."+c+"-controls.hidden");f&&f.classList.remove("hidden"),Array.prototype.slice.call(d.$(".menu:not(."+c+"-fav-menu):not(.hidden)")).forEach(function(a){a.classList.add("hidden")}),Array.prototype.slice.call(d.$(".menu:not(."+c+"-menu):not(.hidden)")).forEach(function(a){a.classList.add("hidden")});var g=d(".menu."+c+"-fav-menu.hidden");g&&g.classList.remove("hidden");var h=d(".menu."+c+"-menu.hidden");h&&h.classList.remove("hidden"),d(".menu-top").classList.remove("hidden"),d("#toggle-fav-button").classList.add("star-selected"),document.dispatchEvent(new Event("act-select-last-menu-item")),e.setSelectedTab(c)}},!0),Promise.resolve()}}},{"../utils/helper":36,"../utils/state":39}],8:[function(a,b,c){function d(a){a.innerHTML=a.getAttribute("original-value"),e(a)}function e(a,b){a.removeAttribute("original-value"),a.classList.remove("cell-editable"),a.removeAttribute("contenteditable")}function f(a){var b=parseInt(a.getAttribute("index")),c=a.parentNode,f=c.parentNode,g=c.classList.contains("hex")?16:10,i=parseInt(a.innerHTML,g),l=parseInt(f.getAttribute("max"));if(isNaN(i)||i<0||i>l)return void(a.innerHTML=a.getAttribute("original-value"));var m,n,o=parseInt(f.getAttribute("offset"));Promise.resolve().then(function(){var a;if(isNaN(o)){m=8*parseInt(f.getAttribute("sz")),n=m;var b=c.querySelectorAll(".array-cell");a=[],Array.prototype.slice.call(b).forEach(function(b){Array.prototype.push.apply(a,j.itemToBytes(parseInt(b.innerHTML,g),m,n))})}else m=parseInt(f.getAttribute("bits")),n=parseInt(f.getAttribute("align")),a=j.itemToBytes(i,m,n);return Promise.resolve(a)}).then(function(a){return null===a?Promise.resolve(null):isNaN(o)?h.fwSaveArray(parseInt(f.getAttribute("command")),a).then(function(){return j.itemToBytes(i,m,n)}):h.hwWrite(null,f.getAttribute("reg-type"),o+(n>>3)*b,a)}).then(function(b){if(null===b)d(a);else{var c=j.bytesToItem(b,m,n);null===c?d(a):e(a,c.toString(g))}}).catch(function(b){k.ERROR(b),d(a)})}var g=a("../utils/helper"),h=a("../utils/ajax"),i=a("../utils/handy"),j=a("../utils/calc"),k=a("../common/handler"),l=function(){return null!==g("div.main-search-holder.long-search")};b.exports={loaded:function(){return document.addEventListener("click",function(a){if(0===a.button){var b=a.target;if(b.classList.contains("array-cell")){a.preventDefault(),b.setAttribute("contenteditable","");var c=parseInt(b.innerHTML);isNaN(c)&&(c=0),b.setAttribute("original-value",c.toString()),b.classList.add("cell-editable"),b.focus()}}}),document.addEventListener("keypress",function(a){var b=a.target,c=a.keyCode||a.which;b.classList.contains("array-cell")&&13===c&&(a.preventDefault(),f(b))}),document.addEventListener("keydown",function(a){var b=a.target,c=a.keyCode||a.which;b.classList.contains("array-cell")&&27===c&&(a.preventDefault(),d(b))}),document.addEventListener("blur",function(a){var b=a.target;"classList"in b&&b.classList.contains("array-cell")&&(a.preventDefault(),f(b))},!0),document.addEventListener("click",function(a){if(0===a.button){var b=a.target;if(b.classList.contains("radix-button")){var c=b.parentNode;b.classList.toggle("hex");var d=c.querySelector("input.val-text");if(d)d.classList.toggle("hex"),d.classList.contains("hex")?d.value=parseInt(d.value,10).toString(16):d.value=parseInt(d.value,16).toString(10);else{var e=c.querySelector(".array-table");if(e){e.classList.toggle("hex");var f,g=parseInt(e.getAttribute("max"));e.classList.contains("hex")?(f=g.toString(16).length+1+"ex",Array.prototype.slice.call(e.childNodes).forEach(function(a){a.innerHTML=parseInt(a.innerHTML,10).toString(16),a.style.width=f})):(f=g.toString(10).length+1+"ex",Array.prototype.slice.call(e.childNodes).forEach(function(a){a.innerHTML=parseInt(a.innerHTML,16).toString(10),a.style.width=f}))}}}else if("h3"===b.tagName.toLowerCase()&&b.classList.contains("s-header")){var h=b.parentNode.parentNode;if(h&&h.classList.contains("in-common")){l()&&document.dispatchEvent(new Event("act-hide-reg-search"));var j=h.getAttribute("section");i.showTab(h.getAttribute("type"));var k;k={detail:{name:j}},document.dispatchEvent(new CustomEvent("act-select-section",k))}}else if(b.classList.contains("bit-switcher")){var m=b.parentNode.querySelector(".data-bit");m&&m.click()}}}),g("#read-all-button").addEventListener("click",function(a){0===a.button&&document.dispatchEvent(new Event("act-reload-visible"))}),Promise.resolve()}}},{"../common/handler":3,"../utils/ajax":32,"../utils/calc":33,"../utils/handy":35,"../utils/helper":36}],9:[function(a,b,c){!function(){var a=document.querySelectorAll("template");if(0!==a.length){for(var b=!0,c=0;c<a.length;c++)if(0!==a[c].childNodes.length){b=!1;break}if(!b)for(var d=0;d<a.length;d++){for(var e=a[d].childNodes,f=0;f<e.length;f++)a[d].content.appendChild(e[f].cloneNode(!0));for(;a[d].hasChildNodes();)a[d].removeChild(a[d].childNodes[0])}}}()},{}],10:[function(a,b,c){function d(a,b){return a&&b?"RW":a?"RO":b?"WO":"NA"}function e(a){var b=h(".section-link[section="+a+"][type=api]"),c=h(".section[section="+a+"][type=api]");if(b&&c){j.clearMenuItemSelection(),j.hideSections(),i.api.setSelectedSectionName(a),i.navigation.addStep("api",a),b.classList.add("selected-item"),c.classList.remove("hidden"),c.querySelector(".page-sub-menu").classList.remove("hidden");var d=c.querySelectorAll(".control-item");Array.prototype.slice.call(d).forEach(function(a){a.classList.remove("hidden")}),document.dispatchEvent(new Event("act-reload-visible")),h(".content").scrollTop=0}}function f(a,b,c){var e,f,g,i,j,k,l,m,n,o,p,q=h("#api-ctrl-template").content,r=q.querySelector(".control-item"),s=q.querySelector(".data-range"),t=q.querySelector(".val-text"),u=q.querySelector(".data-bit"),v=q.querySelector(".reload-button"),w=q.querySelector(".star-button"),x=q.querySelector(".cmd-label"),y=q.querySelector(".bit-hint"),z=h("#api-enum-template").content,A=z.querySelector(".radio-label"),B=A.querySelector("input"),C=A.querySelector("span");for(var D in c)if(c.hasOwnProperty(D)){if(e=c[D],g=e.dir.includes("GET"),i=e.dir.includes("SET"),n=d(g,i),o=e.value,r.setAttribute("section",b.toString()),r.setAttribute("command",o.toString()),r.setAttribute("display-text",D),r.setAttribute("search",D.toLowerCase().replace(/_/g," ")),w.setAttribute("fav-name",D),r.setAttribute("data-mode",n),"RO"===n)v.classList.remove("hidden"),u.setAttribute("disabled","disabled"),t.setAttribute("disabled","disabled"),s.setAttribute("disabled","disabled");else{if("RW"!==n)continue;v.classList.remove("hidden"),u.removeAttribute("disabled"),t.removeAttribute("disabled"),s.removeAttribute("disabled")}if(x.innerHTML=D,x.setAttribute("title",D),f=e.options,0===Object.keys(f).length){k=b+"-"+o;var E="max"in e?parseInt(e.max):4294967295;x.setAttribute("for",k),1===E?(u.setAttribute("id",k),r.setAttribute("data-type","bit"),l=a.appendChild(r.cloneNode(!0)),l.removeChild(l.querySelector(".data-range")),l.removeChild(l.querySelector(".val-text")),l.removeChild(l.querySelector(".enum-holder")),l.removeChild(l.querySelector(".bit-hint")),l.removeChild(l.querySelector(".radix-button"))):(t.setAttribute("id",k),r.setAttribute("data-type","uint"),s.setAttribute("max",E.toString()),y.innerHTML=Math.round(Math.log(E)*Math.LOG2E).toString(),l=a.appendChild(r.cloneNode(!0)),l.removeChild(l.querySelector(".enum-holder")),l.removeChild(l.querySelector(".bit-switcher")),l.removeChild(l.querySelector(".data-bit")))}else{r.setAttribute("data-type","enum"),l=a.appendChild(r.cloneNode(!0)),l.removeChild(l.querySelector(".data-range")),l.removeChild(l.querySelector(".val-text")),l.removeChild(l.querySelector(".bit-switcher")),l.removeChild(l.querySelector(".data-bit")),l.removeChild(l.querySelector(".bit-hint")),l.removeChild(l.querySelector(".radix-button")),m=l.querySelector(".enum-holder"),j=b+"-"+o;for(var F in f)f.hasOwnProperty(F)&&(p=f[F].value,k="api-"+j+"-"+p,B.setAttribute("id",k),B.setAttribute("name",j),B.setAttribute("type","radio"),B.value=p,A.setAttribute("for",k),C.innerHTML=F,m.appendChild(z.cloneNode(!0)))}}}function g(){i.api.drop(),h(".api-menu").innerHTML="";var a=h(".api-controls");a.innerHTML="",a.classList.add("hidden"),h('.tab-label[for="api-tab"]').classList.add("hidden"),h("#drop-fw-api").classList.add("disabled")}var h=a("../utils/helper"),i=(a("../common/handler"),a("../utils/state")),j=a("../utils/handy"),k=a("./types");b.exports={loaded:function(){return document.addEventListener("act-select-last-menu-item",function(){if(j.isApiTabSelected())if(i.api.hasSelectedSection())e(i.api.getSelectedSectionName());else{var a=h(".section-link[type=api]");a&&e(a.getAttribute("section"))}}),document.addEventListener("act-select-section",function(a){if(j.isApiTabSelected()){var b=a.detail,c=b.name;e(c)}}),document.addEventListener("act-fw-api-loaded",function(){var a=i.api.get();h('.tab-label[for="api-tab"]').classList.remove("hidden"),h("#drop-fw-api").classList.remove("disabled");var b,c,d,e=h("#api-menu-item-template").content,g=e.querySelector("li.section-link"),j=h("#api-section-template").content.querySelector("section.section"),k=j.querySelector("h3"),l=h(".api-menu"),m=h(".api-controls");for(var n in a.sections)a.sections.hasOwnProperty(n)&&(d=a.sections[n].commands,Object.keys(d).length>0&&(g.setAttribute("section",n),g.setAttribute("type","api"),g.setAttribute("search",n.toLowerCase().replace(/_/g," ")),g.innerHTML=n,l.appendChild(g.cloneNode(!0)),k.innerHTML=n,j.setAttribute("section",n),b=a.sections[n].value,c=m.appendChild(j.cloneNode(!0)),c.setAttribute("type","api"),f(c,b,d)));document.dispatchEvent(new Event("act-select-last-menu-item"))}),document.addEventListener("click",function(a){if(0===a.button){var b=a.target;if(b.classList.contains("section-link")&&"api"===b.getAttribute("type")){var c=b.innerHTML;e(c)}}}),document.addEventListener("act-api-value-changed",function(a){var b=a.detail,c=b.section,d=b.command,e=b.value;if("number"==typeof c&&"number"==typeof d&&"number"==typeof e){var f=h('article.control-item[section="'+c+'"][command="'+d+'"][type=api]');f&&k.display(f,e)}}),document.addEventListener("act-fw-drop",g),document.addEventListener("act-restore-menu",function(){if(j.isApiTabSelected()){var a=h(".api-menu");a.classList.remove("hidden"),Array.prototype.slice.call(a.querySelectorAll(".section-link")).forEach(function(a){a.classList.remove("hidden")});var b=h(".api-fav-menu");b.classList.remove("hidden"),Array.prototype.slice.call(b.querySelectorAll(".section-link")).forEach(function(a){a.classList.remove("hidden")})}}),Promise.resolve()}}},{"../common/handler":3,"../utils/handy":35,"../utils/helper":36,"../utils/state":39,"./types":14}],11:[function(a,b,c){function d(a){var b=o.api.get();return b?p.fwGetPage(b.sections.TSYSTEM.value,b.sections.TSYSTEM.commands.BUFFER_DATA_TYPE.value,a):Promise.reject("No FW API loaded")}function e(a,b){return d(a).then(function(c){var d=(1073709056&c)>>15,e=32767&c,f=(c>>>30)+1,g=m('article.control-item[command="'+a+'"][type="'+b+'"]'),h=8*f;g.querySelector("p.bit-hint").innerHTML=h.toString(),g.setAttribute("rs",d.toString()),g.setAttribute("cs",e.toString()),g.setAttribute("nodes",(d*e).toString()),g.setAttribute("sz",f),g.setAttribute("max",(Math.pow(2,h)-1).toString())})}function f(a,b,c,d){var f=m("#calibration-ctrl-template").content,g=f.querySelector(".control-item"),h=g.querySelector(".star-button"),i=parseInt(b.value);g.setAttribute("display-text",c),g.setAttribute("type",d),g.setAttribute("gr","calibrations"),g.setAttribute("command",i.toString()),g.setAttribute("search",c.toLowerCase().replace(/_/g," ")),h.setAttribute("fav-name",c);var j=g.cloneNode(!0),k=j.querySelector(".cmd-label");return k.innerHTML=c.replace(/^CALIBRATION_/,""),"tooltip"in b?k.setAttribute("tooltip",b.tooltip):k.setAttribute("title",c),a.appendChild(j),e(i,d)}function g(){m("#save-static-calibrations").classList.add("disabled"),m("#save-dynamic-calibrations").classList.add("disabled");var a=m(".static-controls");a.innerHTML="",a.classList.add("hidden");var b=m(".dynamic-controls");b.innerHTML="",b.classList.add("hidden"),m('.tab-label[for="static-tab"]').classList.add("hidden"),m('.tab-label[for="dynamic-tab"]').classList.add("hidden"),m(".static-menu").innerHTML="",m(".dynamic-menu").innerHTML=""}function h(a,b){var c=m('.section[section="'+a+'"][type="'+b+'"]'),d=m('.section-link[section="'+a+'"][type="'+b+'"]');c&&d&&(n.hideSections(),n.clearMenuItemSelection(),o["c"+b].setSelectedSectionName(a),o.navigation.addStep(b,a),d.classList.add("selected-item"),c.classList.remove("hidden"),c.querySelector(".control-item").classList.remove("hidden"),c.querySelector(".page-sub-menu").classList.remove("hidden"),document.dispatchEvent(new Event("act-reload-visible")),m(".content").scrollTop=0)}function i(a,b,c,d,e){var f=m("#array-cell-template").content,g=f.querySelector("li"),h=Math.pow(2,8*e)-1;a.innerHTML="",a.setAttribute("max",h.toString()),a.parentNode.querySelector(".mxn-hint").innerHTML=c+"x"+d;for(var i=a.classList.contains("hex")?16:10,j=b.length,k=h.toString(i).length+1+"ex",l=0;l<j;l++)g.innerHTML=b[l].toString(i),g.setAttribute("tooltip",l+"-th element"),
g.setAttribute("index",l.toString()),g.style.width=k,a.appendChild(g.cloneNode(!0))}function j(a,b){var c=m("."+b+"-menu"),d=m("#api-menu-item-template").content,e=d.querySelector(".section-link");for(var f in a)a.hasOwnProperty(f)&&(e.setAttribute("type",b),e.setAttribute("search",f.toLowerCase().replace(/_/g," ")),e.setAttribute("section",f),e.setAttribute("title",f),e.innerHTML=f.replace(/^CALIBRATION_/,""),c.appendChild(e.cloneNode(!0)))}function k(a,b){var c,d=m("."+b+"-controls"),e=m("#api-section-template").content,g=e.querySelector(".section"),h=g.querySelector("h3"),i=[];for(var j in a)a.hasOwnProperty(j)&&(h.innerHTML=j.replace(/^CALIBRATION_/,""),g.setAttribute("section",j),g.setAttribute("type",b),c=d.appendChild(g.cloneNode(!0)),i.push(f(c,a[j],j,b)));return Promise.all(i)}function l(a,b,c){var d;d={detail:"Please wait while operation completes"},document.dispatchEvent(new CustomEvent("act-popup-progress",d));var e=Object.keys(c),f=m("#modal-progress");f.max=e.length;var g=e.map(function(b,d){var e=parseInt(c[b].value),g=m('.control-item[type="'+a+'"][command="'+e+'"]');if(g){var h=parseInt(g.getAttribute("sz")),i=parseInt(g.getAttribute("rs")),j=parseInt(g.getAttribute("cs")),k=parseInt(g.getAttribute("nodes"));return p.fwLoadArray(e,h*k).then(function(a){if(d>f.value&&(f.value=d),Array.isArray(a)){var c=8*h,e=q.bytesToArray(a,c,c);return Promise.resolve({__comment:b,name:b,width:h,rows:i,cols:j,value:e})}return Promise.resolve(null)})}return Promise.resolve(null)});Promise.all(g).then(function(c){f.value=f.max;var d={target:b,luts:c};r.save(a+"-calibrations.json","application/json",d)}).catch(s.ERROR).then(function(){document.dispatchEvent(new Event("act-cover-progress"))})}var m=a("../utils/helper"),n=a("../utils/handy"),o=a("../utils/state"),p=a("../utils/ajax"),q=a("../utils/calc"),r=a("../utils/file"),s=a("../common/handler"),t=function(){return null===m("div.static-controls.hidden")},u=function(){return null===m("div.dynamic-controls.hidden")};b.exports={loaded:function(){return document.addEventListener("act-select-last-menu-item",function(){var a;t()?o.cstatic.hasSelectedSection()?h(o.cstatic.getSelectedSectionName(),"static"):(a=m(".section-link[type=static]"),a&&h(a.getAttribute("section"),"static")):u()&&(o.cdynamic.hasSelectedSection()?h(o.cdynamic.getSelectedSectionName(),"dynamic"):(a=m(".section-link[type=dynamic]"),a&&h(a.getAttribute("section"),"dynamic")))}),document.addEventListener("act-select-section",function(a){var b=a.detail,c=b.name;t()?h(c,"static"):u()&&h(c,"dynamic")}),document.addEventListener("act-fw-api-loaded",function(){var a=o.api.get();if("calibration"in a){var b=a.calibration;j(b,"static"),k(b,"static").then(function(){m('.tab-label[for="static-tab"]').classList.remove("hidden"),m("#save-static-calibrations").classList.remove("disabled"),t()&&document.dispatchEvent(new Event("act-select-last-menu-item"))}).catch(s.FATAL)}if("calibration_isp"in a){var c=a.calibration_isp;j(c,"dynamic"),k(c,"dynamic").then(function(){m('.tab-label[for="dynamic-tab"]').classList.remove("hidden"),m("#save-dynamic-calibrations").classList.remove("disabled"),u()&&document.dispatchEvent(new Event("act-select-last-menu-item"))}).catch(s.FATAL)}}),document.addEventListener("act-calibration-value-changed",function(a){var b=a.detail,c=b.page,d=b.bytes;if("number"==typeof c&&Array.isArray(d)){var e=m('article.control-item[command="'+c+'"][gr="calibrations"]');if(e){var f=e.getAttribute("type");if("static"===f||"dynamic"===f){var g=parseInt(e.getAttribute("sz")),h=8*g,j=q.bytesToArray(d,h,h);if(null===j);else{var k=parseInt(e.getAttribute("rs")),l=parseInt(e.getAttribute("cs"));i(e.querySelector(".array-table"),j,k,l,g),setTimeout(function(){e.querySelector(".reload-button").classList.remove("reloading")},300),s.OK()}}}}}),document.addEventListener("click",function(a){if(0===a.button){var b,c,d,e,f=a.target;if(f.classList.contains("section-link")){var g=f.getAttribute("section"),i=f.getAttribute("type");"static"===i?h(g,i):"dynamic"===i&&h(g,i)}else f.classList.contains("reload-button")&&(e=f.parentNode,"static"!==e.getAttribute("type")&&"dynamic"!==e.getAttribute("type")||(b=parseInt(e.getAttribute("command")),c=parseInt(e.getAttribute("nodes")),d=parseInt(e.getAttribute("sz")),p.fwLoadArray(b,c*d).catch(s.ERROR),f.classList.add("reloading")))}}),document.addEventListener("act-reload-visible",function(){var a;if(t())a="static";else{if(!u())return;a="dynamic"}var b=m.$('section.section:not(.hidden)[type="'+a+'"]');Array.prototype.slice.call(b).forEach(function(a){var b=a.querySelectorAll("article.control-item:not(.hidden)");Array.prototype.slice.call(b).forEach(function(a){var b=parseInt(a.getAttribute("command")),c=parseInt(a.getAttribute("nodes")),d=parseInt(a.getAttribute("sz"));isNaN(b)||isNaN(c)||isNaN(d)||(p.fwLoadArray(b,c*d).catch(s.ERROR),a.querySelector(".reload-button").classList.add("reloading"))})})}),document.addEventListener("act-restore-menu",function(){var a,b;if(t())a=m(".static-menu"),b=m(".static-fav-menu");else{if(!u())return;a=m(".dynamic-menu"),b=m(".dynamic-fav-menu")}a.classList.remove("hidden"),Array.prototype.slice.call(a.querySelectorAll(".section-link")).forEach(function(a){a.classList.remove("hidden")}),b.classList.remove("hidden"),Array.prototype.slice.call(b.querySelectorAll(".section-link")).forEach(function(a){a.classList.remove("hidden")})}),document.addEventListener("act-fw-drop",g),document.addEventListener("act-save-static-calibrations",function(){if(o.api.exists){var a=o.api.get().calibration;l("static","sensor",a)}}),document.addEventListener("act-save-dynamic-calibrations",function(){if(o.api.exists){var a=o.api.get().calibration_isp;l("dynamic","isp",a)}}),Promise.resolve()}}},{"../common/handler":3,"../utils/ajax":32,"../utils/calc":33,"../utils/file":34,"../utils/handy":35,"../utils/helper":36,"../utils/state":39}],12:[function(a,b,c){function d(a){var b=a&&"sections"in a&&"TSELFTEST"in a.sections;if(b){var c="calibration"in a||"calibration_isp"in a;if(c){var d="TSYSTEM"in a.sections&&"value"in a.sections.TSYSTEM;if(d){var e="commands"in a.sections.TSYSTEM&&"BUFFER_DATA_TYPE"in a.sections.TSYSTEM.commands;if(e)return"value"in a.sections.TSYSTEM.commands.BUFFER_DATA_TYPE}return!1}return!0}return!1}function e(){return i.get("/command.json").then(function(a){return k.api.cache(a),Promise.resolve(d(a))}).then(function(a){a?document.dispatchEvent(new Event("act-fw-api-loaded")):(document.dispatchEvent(new Event("act-fw-drop")),l.ERROR("FW API file is invalid"))}).catch(function(a){})}function f(){i.fwDeleteApi().catch(l.ERROR)}function g(a,b){var c,d=parseInt(b.getAttribute("section")),e=parseInt(b.getAttribute("command"));c=a.classList.contains("hex")?parseInt(a.value,16):parseInt(a.value,10),isNaN(c)||(i.fwSet(d,e,c).catch(l.ERROR),b.querySelector(".reload-button").classList.add("reloading"))}var h=a("../utils/helper"),i=a("../utils/ajax"),j=a("../utils/handy"),k=a("../utils/state"),l=a("../common/handler");b.exports={loaded:function(){return document.addEventListener("click",function(a){if(0===a.button){var b,c,d,e,f=a.target;f.classList.contains("reload-button")?(b=f.parentNode,"api"===b.getAttribute("type")&&(a.shiftKey?(init={},init.detail={control:b,type:"api"},document.dispatchEvent(new CustomEvent("act-polling",init))):(c=parseInt(b.getAttribute("section")),d=parseInt(b.getAttribute("command")),i.fwGet(c,d).catch(l.ERROR),f.classList.add("reloading")))):f.classList.contains("data-bit")&&(b=f.parentNode,"api"===b.getAttribute("type")&&(c=parseInt(b.getAttribute("section")),d=parseInt(b.getAttribute("command")),e=f.checked?1:0,i.fwSet(c,d,e).catch(l.ERROR),b.querySelector(".reload-button").classList.add("reloading")))}}),document.addEventListener("change",function(a){var b=a.target;if(b.classList.contains("radio-button")){var c=b.parentNode.parentNode.parentNode.parentNode;if("api"===c.getAttribute("type")){var d=parseInt(c.getAttribute("section")),e=parseInt(c.getAttribute("command")),f=parseInt(b.value);isNaN(d)||isNaN(e)||isNaN(f)||(i.fwSet(d,e,f).catch(l.ERROR),c.querySelector(".reload-button").classList.add("reloading"))}}}),document.addEventListener("input",function(a){var b,c,d,e=a.target,f=e.parentNode;e.classList.contains("data-range")&&f&&"api"===f.getAttribute("type")&&(b=parseInt(f.getAttribute("section")),c=parseInt(f.getAttribute("command")),d=parseInt(e.value),isNaN(d)||(i.fwSet(b,c,d).catch(l.ERROR),f.querySelector(".reload-button").classList.add("reloading")))}),document.addEventListener("keypress",function(a){var b=a.target,c=a.keyCode||a.which;if(b.classList.contains("val-text")){var d=b.parentNode;"api"===d.getAttribute("type")&&13===c&&g(b,d)}}),document.addEventListener("blur",function(a){var b=a.target;if("classList"in b&&b.classList.contains("val-text")){var c=b.parentNode;"api"===c.getAttribute("type")&&g(b,c)}},!0),document.addEventListener("act-reload-visible",function(){if(j.isApiTabSelected()){var a=h.$("section.section:not(.hidden)[type=api]");Array.prototype.slice.call(a).forEach(function(a){var b=a.querySelectorAll("article.control-item:not(.hidden)");Array.prototype.slice.call(b).forEach(function(a){var b=parseInt(a.getAttribute("section")),c=parseInt(a.getAttribute("command"));i.fwGet(b,c).catch(l.ERROR),a.querySelector(".reload-button").classList.add("reloading")})})}}),document.addEventListener("act-fw-drop",f),document.addEventListener("act-fw-api-loaded",function(){var a=k.api.get();if("selfcheck"in a&&"FIRMWARE_ID"in a.selfcheck&&"value"in a.selfcheck.FIRMWARE_ID){if("FW_REVISION"in a.sections.TSELFTEST.commands){var b=parseInt(a.selfcheck.FIRMWARE_ID.value),c=a.sections.TSELFTEST,d=c.commands.FW_REVISION;"value"in c&&"value"in d?i.fwGet(c.value,d.value,!0).then(function(a){b===a?l.OK():l.ERROR("FW API revision is wrong")}).catch(function(a){l.ERROR("Unable to check FW API revision: "+a)}):l.ERROR("Unable to check FW API revision")}}else l.ERROR("Unable to check FW API revision")}),e()}}},{"../common/handler":3,"../utils/ajax":32,"../utils/handy":35,"../utils/helper":36,"../utils/state":39}],13:[function(a,b,c){function d(a){var b=a.target,c=b.files[0];if(c.size>0){var d=b.parentNode,e=parseInt(d.getAttribute("section")),f=parseInt(d.getAttribute("command")),g=new FileReader;g.onload=function(a){return function(a){n.fileUpload(e,f,a.target.result).then(function(){b.value=""}).catch(j.ERROR)}}(c),g.readAsArrayBuffer(c)}else j.ERROR("Empty file"),b.value="",k("#progress").classList.add("hidden")}function e(a){var b=k('.section[section="'+a+'"][type=file]'),c=k('.section-link[section="'+a+'"][type=file]');b&&c&&(m.hideSections(),m.clearMenuItemSelection(),l.file.setSelectedSectionName(a),l.navigation.addStep("file",a),c.classList.add("selected-item"),b.classList.remove("hidden"),b.querySelector(".control-item").classList.remove("hidden"),b.querySelector(".page-sub-menu").classList.remove("hidden"),document.dispatchEvent(new Event("act-reload-visible")),k(".content").scrollTop=0)}function f(){var a=k(".file-controls");a.innerHTML="",a.classList.add("hidden"),k('.tab-label[for="file-tab"]').classList.add("hidden"),k(".file-menu").innerHTML=""}function g(a){var b=k(".file-menu"),c=k("#api-menu-item-template").content,d=c.querySelector(".section-link");for(var e in a)a.hasOwnProperty(e)&&(d.setAttribute("type","file"),d.setAttribute("search",e.toLowerCase().replace(/_/g," ")),d.setAttribute("section",e),d.setAttribute("title",e),d.innerHTML=e,b.appendChild(d.cloneNode(!0)))}function h(a,b,c,e){var f=k("#file-transfer-ctrl-template").content,g=f.querySelector(".control-item"),h=g.querySelector(".star-button"),i=parseInt(b.value);g.setAttribute("display-text",c),g.setAttribute("section",e.toString()),g.setAttribute("command",i.toString()),g.setAttribute("search",c.toLowerCase().replace(/_/g," ")),h.setAttribute("fav-name",c);var j=g.cloneNode(!0),l=j.querySelector(".cmd-label");l.innerHTML=c,"tooltip"in b?l.setAttribute("tooltip",b.tooltip):l.setAttribute("title",c);var m=j.querySelector(".file-transfer-loader");m.addEventListener("change",d),a.appendChild(j)}function i(a,b){var c,d=k(".file-controls"),e=k("#api-section-template").content,f=e.querySelector(".section"),g=f.querySelector("h3");for(var i in a)a.hasOwnProperty(i)&&(g.innerHTML=i,f.setAttribute("section",i),f.setAttribute("type","file"),c=d.appendChild(f.cloneNode(!0)),h(c,a[i],i,b))}var j=a("../common/handler"),k=a("../utils/helper"),l=a("../utils/state"),m=a("../utils/handy"),n=a("../utils/ajax"),o=a("../utils/file"),p=function(){return null===k("div.file-controls.hidden")};b.exports={loaded:function(){document.addEventListener("act-select-last-menu-item",function(){var a;p()&&(l.file.hasSelectedSection()?e(l.file.getSelectedSectionName()):(a=k(".section-link[type=file]"),a&&e(a.getAttribute("section"))))}),document.addEventListener("act-fw-api-loaded",function(){var a=l.api.get();if("file_transfer"in a&&"value"in a.file_transfer&&"types"in a.file_transfer){var b=a.file_transfer.types,c=parseInt(a.file_transfer.value);g(b),i(b,c),k('.tab-label[for="file-tab"]').classList.remove("hidden"),p()&&document.dispatchEvent(new Event("act-select-last-menu-item"))}}),document.addEventListener("act-fw-drop",f),document.addEventListener("act-restore-menu",function(){if(p()){var a=k(".file-menu");a.classList.remove("hidden"),Array.prototype.slice.call(a.querySelectorAll(".section-link")).forEach(function(a){a.classList.remove("hidden")});var b=k(".file-fav-menu");b.classList.remove("hidden"),Array.prototype.slice.call(b.querySelectorAll(".section-link")).forEach(function(a){a.classList.remove("hidden")})}}),document.addEventListener("click",function(a){if(0===a.button){var b,c=a.target;if(c.classList.contains("section-link")){var d=c.getAttribute("section");e(d)}else if(c.classList.contains("upload-file-button")){b=c.parentNode;var f=b.querySelector(".file-transfer-loader");f.click()}else if(c.classList.contains("download-file-button")&&(b=c.parentNode,"file"===b.getAttribute("type"))){var g=parseInt(b.getAttribute("section")),h=parseInt(b.getAttribute("command"));if(isNaN(g)||isNaN(h))return;n.fileDownload(g,h).then(function(a){var c=new Uint8Array(a.length);a.forEach(function(b,d){c[d]=a[d]}),o.save(b.getAttribute("display-text").toLowerCase()+".bin","application/octet-stream",c)}).catch(j.ERROR)}}})}}},{"../common/handler":3,"../utils/ajax":32,"../utils/file":34,"../utils/handy":35,"../utils/helper":36,"../utils/state":39}],14:[function(a,b,c){var d=(a("../utils/helper"),a("./types/uint")),e=a("./types/bit"),f=a("./types/enum");b.exports={display:function(a,b){var c=a.getAttribute("data-type");switch(c){case"uint":d.display(a,b);break;case"bit":e.display(a,b);break;case"enum":f.display(a,b)}setTimeout(function(){a.querySelector(".reload-button").classList.remove("reloading")},100)}}},{"../utils/helper":36,"./types/bit":15,"./types/enum":16,"./types/uint":17}],15:[function(a,b,c){var d=a("../../common/handler");b.exports={display:function(a,b){var c=parseInt(b);return c<0||c>1?void d.ERROR("Value "+c+" is not within range [0, 1] specified for "+a.getAttribute("display-text")):(a.querySelector("input.data-bit").checked=0!==c,void d.OK())}}},{"../../common/handler":3}],16:[function(a,b,c){var d=a("../../common/handler");b.exports={display:function(a,b){for(var c,e=parseInt(b),f=a.querySelector(".enum-holder"),g=f.querySelectorAll("input[type=radio]"),h=[],i=0,j=g.length;i<j;i++){c=g[i];var k=parseInt(c.getAttribute("value"));if(h.push(k),k===e)return c.checked=!0,void d.OK()}d.ERROR("Value "+e+" is not within enum "+JSON.stringify(h)+" specified for "+a.getAttribute("display-text"))}}},{"../../common/handler":3}],17:[function(a,b,c){var d=a("../../common/handler");b.exports={display:function(a,b){var c=parseInt(b),e=a.querySelector("input.data-range"),f=e.getAttribute("min"),g=e.getAttribute("max");if(c<f||g<c)return void d.ERROR("Value "+c+" is not within range ["+f+", "+g+"] specified for "+a.getAttribute("display-text"));e.value=c;var h=a.querySelector("input.val-text");h.classList.contains("hex")?h.value=c.toString(16):h.value=c.toString(10),d.OK()}}},{"../../common/handler":3}],18:[function(a,b,c){function d(a){var b=e('.section-link[section="'+a+'"][type=hw]'),c=e('.section[section="'+a+'"]');if(b&&c){g.clearMenuItemSelection(),g.hideSections(),f.hw.setSelectedSectionName(a),f.navigation.addStep("hw",a),b.classList.add("selected-item"),c.classList.remove("hidden");var d=c.querySelectorAll(".control-item.hidden[type=hw]");d&&Array.prototype.slice.call(d).forEach(function(a){a.classList.remove("hidden")}),c.querySelector(".page-sub-menu").classList.remove("hidden"),document.dispatchEvent(new Event("act-reload-visible")),e(".content").scrollTop=0}}var e=a("../utils/helper"),f=a("../utils/state"),g=a("../utils/handy");b.exports={loaded:function(){return document.addEventListener("act-select-section",function(a){if(g.isHardwareTabSelected()){var b=a.detail,c=b.name;d(c)}}),document.addEventListener("click",function(a){if(0===a.button){var b=a.target;b.classList.contains("section-link")&&"hw"===b.getAttribute("type")&&d(b.getAttribute("section"))}}),document.addEventListener("act-restore-menu",function(){if(g.isHardwareTabSelected()){var a=e(".hw-menu");a.classList.remove("hidden"),Array.prototype.slice.call(a.querySelectorAll(".section-link")).forEach(function(a){a.classList.remove("hidden")});var b=e(".hw-fav-menu");b.classList.remove("hidden"),Array.prototype.slice.call(b.querySelectorAll(".section-link")).forEach(function(a){a.classList.remove("hidden")})}}),document.addEventListener("act-select-last-menu-item",function(){if(g.isHardwareTabSelected())if(f.hw.hasSelectedSection())d(f.hw.getSelectedSectionName());else{var a=e(".section-link[type=hw]");a&&d(a.getAttribute("section"))}}),Promise.resolve()}}},{"../utils/handy":35,"../utils/helper":36,"../utils/state":39}],19:[function(a,b,c){function d(a,b){var c=b||t('article.control-item[command="'+a+'"][type=hw]');return c?{type:c.getAttribute("reg-type"),offset:parseInt(c.getAttribute("offset")),size:parseInt(c.getAttribute("sz"))}:null}function e(a){return{command:a.getAttribute("command"),type:a.getAttribute("reg-type"),offset:parseInt(a.getAttribute("offset")),mask:parseInt(a.getAttribute("mask"))}}function f(a){var b=d(a);b&&v.hwRead(a,b.type,b.offset,b.size).catch(A.ERROR)}function g(a,b){if(a&&Array.isArray(b)){var c=t('article.control-item[command="'+a+'"][type=hw]');if(c){var d=c.getAttribute("reg-type"),e=parseInt(c.getAttribute("offset"));if("a"===d||"l"===d)return v.hwWrite(a,d,e,b).catch(A.ERROR);var f=c.getAttribute("mask").split(",").map(o);return v.hwWrite(a,d,e,b,f).catch(A.ERROR)}}return Promise.resolve()}function h(a){var b={},c=a.match(B);if(c)b.start=parseInt(c[5]),b.stop=parseInt(c[4]),b.bits=b.stop-b.start+1;else if(c=a.match(C))b.stop=parseInt(c[4]);else if(c=a.match(D),!c)return A.ERROR("Invalid register address format: "+a),null;var d=parseInt(c[1],16),e=parseInt(c[2],16),f=parseInt(c[3],16);return b.offset=((127&d)<<15)+(e<<7)+(127&f),b}function i(){var a=t.$("article.control-item[multi][type=hw]"),b=new Set;Array.prototype.slice.call(a).forEach(function(a){b.add(a.getAttribute("multi"))}),b.forEach(function(a){var b=t.$('article.control-item[multi="'+a+'"][type=hw]'),c=b.length;if(c<1)return void A.ERROR("Bad multi-byte "+a);for(var d,e,f=0,g=[],h={},i=0;i<c;i++)d=b[i],e=d.getAttribute("offset"),g.push(parseInt(e)),h[e]=d,f+=parseInt(d.getAttribute("bits"));var j=g.sort(function(a,b){return a-b}),k="",l="",m="";for(i=0;i<c;i++)i>0&&(k+=",",l+=",",m+=","),d=h[j[i]],k+=d.getAttribute("mask"),l+=d.getAttribute("low"),m+=d.getAttribute("high"),i>0&&(d.parentNode.removeChild(d),delete h[j[i]]);var n=Math.pow(2,f)-1,o=h[j[0]];o.setAttribute("command",a),o.setAttribute("sz",c),o.setAttribute("bits",f.toString()),o.setAttribute("mask",k),o.setAttribute("low",l),o.setAttribute("high",m),o.setAttribute("max",n.toString()),o.querySelector(".data-range").setAttribute("max",n.toString()),o.querySelector(".bit-hint").innerHTML=f.toString();var p=a.replace(/[_\s\/]/g,"-").toLowerCase();o.querySelector(".val-text").setAttribute("id",p);var q=o.querySelector(".cmd-label");q.querySelector(".byte-hint").innerHTML=f+" bits of "+c+" bytes";var r=q.querySelector(".cmd-show");r.innerHTML=a.split("/").pop(),r.setAttribute("for",p)})}function j(){var a=t.$("article.control-item[multi][type=hw]"),b=new Set;Array.prototype.slice.call(a).forEach(function(a){var c=a.getAttribute("multi");b.add(c)}),b.forEach(function(a){for(var b,c,d,e,f,g,h,i,j,k,l=t('article.control-item[multi="'+a+'"][type=hw]'),m=l.getAttribute("mask").split(",").map(o),n=l.getAttribute("low").split(",").map(o),p=l.getAttribute("high").split(",").map(o),q=parseInt(l.getAttribute("offset")),r=m.length,s=0;s<r;s++){g=m[s],h=n[s],i=p[s],j=8*s,k=i-h+1,b=a+" ("+(i+j)+":"+(h+j)+")",c=b.split("/").pop(),d=l.cloneNode(!0),d.setAttribute("command",b),d.setAttribute("mask",g.toString()),d.setAttribute("offset",(q+s).toString()),d.setAttribute("sz","1"),d.setAttribute("low",h.toString()),d.setAttribute("high",i.toString()),d.setAttribute("bits",k.toString()),d.setAttribute("max",((1<<k)-1).toString()),e=d.querySelector(".cmd-label"),e.querySelector(".byte-hint").innerHTML="";var u=b.replace(/[_\s\/\(\):]/g,"-").toLowerCase(),v=e.querySelector(".cmd-show");v.innerHTML=c,v.setAttribute("for",u),f=d.querySelector(".data-range"),f.setAttribute("max",g.toString()),d.querySelector(".bit-hint").innerHTML=k.toString(),d.querySelector(".val-text").setAttribute("id",u),l.parentNode.insertBefore(d,l)}l.parentNode.removeChild(l)})}function k(a){var b=h(a.getAttribute("data-address"));if(!b)return void a.classList.add("bad-register");if(a.setAttribute("offset",b.offset),a.removeAttribute("data-address"),"WO"===a.getAttribute("data-mode"))return void a.classList.add("bad-register");var c=a.getAttribute("data-type"),d=a.getAttribute("command"),e=a.querySelector("i.star-button");switch(e&&e.setAttribute("fav-name",d.toLowerCase()),a.setAttribute("search",d.split("/").pop().toLowerCase()),c){case"bit":a.setAttribute("reg-type","r"),a.setAttribute("mask",(1<<b.stop).toString());break;case"byte":a.setAttribute("reg-type","r"),a.setAttribute("low",b.start),a.setAttribute("high",b.stop),a.setAttribute("mask",((1<<b.stop+1)-(1<<b.start)).toString());break;case"array":a.setAttribute("reg-type","a");break;case"lut":a.setAttribute("reg-type","l");break;default:return A.ERROR("Unknown data type "+c+" for register "+d),void a.classList.add("bad-register")}if("bit"===c)a.setAttribute("sz","1");else if("byte"===c){a.setAttribute("bits",b.bits),a.setAttribute("sz","1"),a.setAttribute("max",((1<<parseInt(b.bits))-1).toString());var f=d.match(G);if(f&&2===f.length){var g=f[1];a.setAttribute("multi",g);var i=g.toLowerCase();e&&e.setAttribute("fav-name",i),a.setAttribute("search",i.split("/").pop())}}else if("array"===c||"lut"===c){var j=a.hasAttribute("table-bits")?a.getAttribute("table-bits"):"8",k=a.hasAttribute("table-align")?a.getAttribute("table-align").substring(2):"8",l=a.hasAttribute("data-nodes")?a.getAttribute("data-nodes"):"1",m=a.hasAttribute("arrangement")?a.getAttribute("arrangement"):"1x"+l,n=parseInt(Math.floor(parseInt(k)*parseInt(l)/8));a.setAttribute("bits",j),a.setAttribute("align",k),a.setAttribute("nodes",l),a.setAttribute("sz",n.toString()),a.setAttribute("max",(Math.pow(2,parseInt(j))-1).toString()),a.setAttribute("arrangement",m)}a.removeAttribute("table-align"),a.removeAttribute("table-bits"),a.removeAttribute("data-nodes")}function l(a){var b=a.getAttribute("data-type");if("byte"===b){var c=a.querySelector("input.data-range[type=range]"),d=a.getAttribute("max");c&&c.setAttribute("max",d);var e=a.querySelector("p.bit-hint");e&&(e.innerHTML=a.getAttribute("bits"))}else"array"!==b&&"lut"!==b||(a.querySelector("p.bit-hint").innerHTML=a.getAttribute("bits"))}function m(a){[].forEach.call(a.querySelectorAll("article.bad-register"),function(a){a.parentNode.removeChild(a)})}function n(a){var b=a.querySelectorAll("article.control-item[type=hw]");Array.prototype.slice.call(b).forEach(function(a){k(a),l(a)}),m(a)}function o(a){return parseInt(a)}function p(a,b,c){var d=parseInt(a);if(isNaN(d)||b.length!==c)return Array.apply(null,new Array(c)).map(Number.prototype.valueOf,0);for(var e,f,g,h=[],i=0;i<c;i++)e=b[i],g=8*i,f=(d&Math.pow(2,g+8)-1)>>>g,h.push(f&e);return h}function q(a,b){var c,d=b.getAttribute("command"),e=parseInt(b.getAttribute("sz")),f=parseInt(a.value,a.classList.contains("hex")?16:10);if(1===e){var h=parseInt(b.getAttribute("low"));c=parseInt(b.getAttribute("mask")),h>0&&(f<<=h),g(d,[f&c])}else c=b.getAttribute("mask").split(",").map(o),g(d,p(f,c,e));b.querySelector(".reload-button").classList.add("reloading")}function r(a,b,c){var d=t('article.control-item[command="'+a+'"][type=hw]');if(d){var e=(parseInt(d.getAttribute("offset")),d.getAttribute("data-type"));if("byte"===e||"bit"===e){var f=d.getAttribute("mask").split(",").map(o);return c(d,e,b,f)}if("array"===e||"lut"===e){var g=parseInt(d.getAttribute("bits")),h=parseInt(d.getAttribute("align"));return c(d,e,b,null,g,h)}}}function s(a){var b;b={detail:"Please wait while operation completes"},document.dispatchEvent(new CustomEvent("act-popup-progress",b));var c=Array.prototype.slice.call(t.$('.control-item[type=hw][command$="/MCU priority"]')),d=c.map(function(a){return a.querySelector(".data-bit").checked}),f=c.map(function(a){var b=e(a);return v.hwWrite(b.command,b.type,b.offset,[255],[b.mask])});Promise.all(f).then(function(){var b=u.defer(),c=t("#modal-progress"),d=E(F);return d.onmessage=function(a){var e=a.data;e.error?(d.terminate(),c.value=0,b.reject(e.error)):e.done?(c.value=0,b.resolve(e.results)):c.value<e.progress&&(c.value=e.progress)},d.onerror=function(a){b.reject(a.message),c.value=0},c.value=0,c.max=a.length,d.postMessage({base:document.domain+":"+location.port,commands:a}),b.promise}).then(function(a){var b=a.map(function(a){return{name:a.name,value:r(a.name,a.bytes,z.comprehend)}});y.save("settings.json","application/json",b)}).catch(A.ERROR).then(function(){c.map(function(a,b){var c=e(a);v.hwWrite(c.command,c.type,c.offset,d[b]?[255]:[0],[c.mask])})}).catch(A.ERROR).then(function(){document.dispatchEvent(new Event("act-cover-progress"))})}var t=a("../utils/helper"),u=a("../utils/promise"),v=a("../utils/ajax"),w=a("../utils/calc"),x=a("../utils/handy"),y=a("../utils/file"),z=a("../hw/types"),A=a("../common/handler"),B=/^\(([a-f\d]+)=([a-f\d]+)\)([a-f\d]+)\.([0-7]):([0-7])$/i,C=/^\(([a-f\d]+)=([a-f\d]+)\)([a-f\d]+)\.([0-7])$/i,D=/^\(([a-f\d]+)=([a-f\d]+)\)([a-f\d]+)$/i,E=a("webworkify"),F=a("../workers/rhr"),G=/(.*) \(\d+:\d+\)$/;b.exports={loaded:function(){var a=t.$("section.section[type=hw]");return Array.prototype.slice.call(a).forEach(function(a){n(a)}),document.addEventListener("click",function(a){if(0===a.button){var b,c,d,e=a.target;e.classList.contains("reload-button")?(d=e.parentNode,"hw"===d.getAttribute("type")&&(a.shiftKey?(c={},c.detail={control:d,type:"hw"},document.dispatchEvent(new CustomEvent("act-polling",c))):(b=d.getAttribute("command"),f(b),e.classList.add("reloading")))):e.classList.contains("data-bit")&&(d=e.parentNode,"hw"===d.getAttribute("type")&&(b=d.getAttribute("command"),g(b,e.checked?[255]:[0]),d.querySelector(".reload-button").classList.add("reloading")))}}),document.addEventListener("input",function(a){var b=a.target,c=b.parentNode;b.classList.contains("data-range")&&"hw"===c.getAttribute("type")&&q(b,c)}),document.addEventListener("keypress",function(a){var b=a.target,c=a.keyCode||a.which;if(b.classList.contains("val-text")){var d=b.parentNode;"hw"===d.getAttribute("type")&&13===c&&q(b,d)}}),document.addEventListener("blur",function(a){var b=a.target;if("classList"in b&&b.classList.contains("val-text")){var c=b.parentNode;"hw"===c.getAttribute("type")&&q(b,c)}},!0),document.addEventListener("act-hw-value-changed",function(a){var b=a.detail,c=b.command,d=b.bytes;c&&Array.isArray(d)&&r(c,d,z.display)}),document.addEventListener("act-combine-hw-bytes",i),document.addEventListener("act-split-hw-bytes",j),document.addEventListener("act-reload-visible",function(){if(x.isHardwareTabSelected()){var a=t.$("section.section:not(.hidden)[type=hw]");Array.prototype.slice.call(a).forEach(function(a){var b=a.querySelectorAll("article.control-item:not(.hidden)");Array.prototype.slice.call(b).forEach(function(a){var b=a.getAttribute("command");f(b),a.querySelector(".reload-button").classList.add("reloading")})})}}),document.addEventListener("act-save-visible-hw-registers",function(){var a=[],b=Array.prototype.slice.call(t.$(".section:not(.hidden)[type=hw]"));b.forEach(function(b){Array.prototype.push.apply(a,Array.prototype.slice.call(b.querySelectorAll(".control-item:not(.hidden)[type=hw]")))}),s(a.map(function(a){var b=a.getAttribute("command"),c=d(b,a);return c.name=b,c}))}),document.addEventListener("act-save-hw-registers",function(){var a=Array.prototype.slice.call(t.$(".control-item[type=hw]")).map(function(a){var b=a.getAttribute("command"),c=d(b,a);return c.name=b,c});s(a)}),document.addEventListener("act-load-hw-registers",function(a){var b=a.detail;if(Array.isArray(b)){var c;c={detail:"Please wait while operation completes"},document.dispatchEvent(new CustomEvent("act-popup-progress",c));var d=t("#modal-progress");d.value=0,d.max=b.length;var f=Array.prototype.slice.call(t.$('.control-item[type=hw][command$="/MCU priority"]')),h=f.map(function(a){return a.querySelector(".data-bit").checked}),i=f.map(function(a){var b=e(a);return v.hwWrite(b.command,b.type,b.offset,[255],[b.mask])});Promise.all(i).then(function(){var a=b.map(function(a,b){return Promise.resolve().then(function(){var b=a.name;if(b.includes("/MCU priority"))return Promise.resolve();var c=t('.control-item[command="'+b+'"][type=hw]');if(c&&"RO"!==c.getAttribute("data-mode")){var d=c.getAttribute("data-type");switch(d){case"bit":return g(b,a.value?[255]:[0]);case"byte":var e=parseInt(c.getAttribute("sz"));if(1===e)return g(b,[a.value]);var f=c.getAttribute("mask").split(",").map(o);return g(b,p(a.value,f,e));case"array":case"lut":var h=parseInt(c.getAttribute("bits")),i=parseInt(c.getAttribute("align")),j=c.getAttribute("reg-type"),k=parseInt(c.getAttribute("offset"));return v.hwWrite(b,j,k,w.arrayToBytes(a.value,h,i)).catch(A.ERROR);default:return Promise.resolve()}}return Promise.resolve()}).then(function(){d.value<b&&(d.value=b)})});return Promise.all(a)}).catch(A.ERROR).then(function(){f.map(function(a,b){var c=e(a);v.hwWrite(c.command,c.type,c.offset,h[b]?[255]:[0],[c.mask])})}).catch(A.ERROR).then(function(){document.dispatchEvent(new Event("act-cover-progress"))})}}),t("#combine-multi-bytes").checked&&i(),Promise.resolve()}}},{"../common/handler":3,"../hw/types":20,"../utils/ajax":32,"../utils/calc":33,"../utils/file":34,"../utils/handy":35,"../utils/helper":36,"../utils/promise":38,"../workers/rhr":40,webworkify:1}],20:[function(a,b,c){var d=(a("../utils/helper"),a("./types/bit")),e=a("./types/byte"),f=a("./types/array");b.exports={display:function(a,b,c,g,h,i){switch(b){case"bit":d.display(a,c,g);break;case"byte":e.display(a,c,g);break;case"array":case"lut":f.display(a,c,h,i)}setTimeout(function(){a.querySelector(".reload-button").classList.remove("reloading")},100)},comprehend:function(a,b,c,g,h,i){switch(b){case"bit":return d.comprehend(c,g);case"byte":return e.comprehend(c,g);case"array":case"lut":return f.comprehend(c,h,i);default:return}}}},{"../utils/helper":36,"./types/array":21,"./types/bit":22,"./types/byte":23}],21:[function(a,b,c){function d(a,b){return b%8!==0||b<0||!!(a>b||a<0)}var e=a("../../utils/helper"),f=a("../../utils/calc"),g=a("../../common/handler");b.exports={display:function(a,b,c,h){if(d(c,h))return void g.ERROR("Bad array bits or align for "+a.getAttribute("display-text"));var i=a.querySelector(".array-table");if(i){var j=b.length,k=Math.pow(2,c)-1,l=k;i.innerHTML="",i.setAttribute("max",l.toString());for(var m,n=i.classList.contains("hex")?16:10,o=e("#array-cell-template").content,p=o.querySelector("li"),q=l.toString(n).length+1+"ex",r=h>>>3,s=parseInt(a.getAttribute("sz")),t=0,u=0;t<j&&u<s;t+=r)m=f.bytesToItem2(b,k,h,t),
p.innerHTML=m.toString(n),p.setAttribute("tooltip",u+"-th element"),p.setAttribute("index",u.toString()),p.style.width=q,i.appendChild(p.cloneNode(!0)),u++;g.OK()}},comprehend:function(a,b,c){return d(b,c)?void 0:f.bytesToArray(a,b,c)||void 0}}},{"../../common/handler":3,"../../utils/calc":33,"../../utils/helper":36}],22:[function(a,b,c){function d(a,b){return 0!==(a[0]&b[0])}var e=a("../../common/handler");b.exports={display:function(a,b,c){if(1===b.length&&1===c.length){var f=a.querySelector("input.data-bit");f&&(f.checked=d(b,c)),e.OK()}else e.ERROR("Size mismatch for "+a.getAttribute("display-text"))},comprehend:function(a,b){return 1===a.length&&1===b.length?d(a,b):void 0}}},{"../../common/handler":3}],23:[function(a,b,c){function d(a,b,c){for(var d,e,f=0,g=0;g<c;g++){if(d=parseInt(a[g]),e=parseInt(b[g]),isNaN(d)||isNaN(e))return NaN;f+=(d&e)/(e&-e)<<8*g}return f>>>0}var e=a("../../common/handler");b.exports={display:function(a,b,c){var f=b.length;if(f===c.length&&f>0){var g=d(b,c,f),h=a.querySelector("input.data-range"),i=a.querySelector("input.val-text");if(isNaN(g))return h&&(h.value=0),i&&(i.value="0"),void e.ERROR("Bad value for "+a.getAttribute("display-text"));var j=a.getAttribute("max");g<0||g>j?e.ERROR("Value "+g+" exceeds "+j+" for "+a.getAttribute("display-text")):(h&&(h.value=g),i&&(i.classList.contains("hex")?i.value=g.toString(16):i.value=g.toString(10)))}else e.ERROR("Size mismatch for "+a.getAttribute("display-text"))},comprehend:function(a,b){var c=a.length;if(c===b.length&&c>0){var e=d(a,b,c);return isNaN(e)?void 0:e}}}},{"../../common/handler":3}],24:[function(a,b,c){function d(){var a=h.__get_namespace(),b=a+"/used";if(localStorage.hasOwnProperty(b));else{for(var c in localStorage)localStorage.hasOwnProperty(c)&&0===c.indexOf("acs/")&&delete localStorage[c];localStorage[b]="true"}return Promise.resolve()}function e(){Promise.resolve().then(d).then(i.loaded).then(j.loaded).then(k.loaded).then(l.loaded).then(m.loaded).then(n.loaded).then(p.loaded).then(q.loaded).then(r.loaded).then(s.loaded).then(t.loaded).then(u.loaded).then(v.loaded).then(w.loaded).then(x.loaded).then(y.loaded).then(z.loaded).then(A.loaded).then(o.loaded).then(function(){return f.returnToTab(),g.get("/version").then(function(a){document.querySelector("#acs-ver").innerHTML=a.version})}).catch(i.ERROR)}a("./fixme"),a("./polyfill");var f=a("./utils/handy"),g=a("./utils/ajax"),h=a("./utils/state"),i=a("./common/handler"),j=a("./common/search"),k=a("./common/viewer"),l=a("./common/tabs"),m=a("./common/polling"),n=a("./common/popup"),o=a("./common/fav"),p=a("./ui/splitter"),q=a("./ui/footer"),r=a("./ui/tooltip"),s=a("./ui/settings"),t=a("./ui/options"),u=a("./ui/history"),v=a("./hw/menu"),w=a("./hw/registers"),x=a("./fw/calibrations"),y=a("./fw/transfer"),z=a("./fw/api"),A=a("./fw/commands");document.addEventListener("act-init-am",function(a){var b=a.detail.defer,c=document.querySelector('article.control-item[command="cmd queues/Data"][type=hw]'),d=document.querySelector('article.control-item[command="System/Debug 0"][type=hw]'),e=null,f=null,h=null;c&&(e=parseInt(c.getAttribute("offset")),f=parseInt(c.getAttribute("sz"))),d&&(h=parseInt(d.getAttribute("offset"))),g.initAM(h,e,f).then(b.resolve).catch(b.reject)}),"complete"===document.readyState||"interactive"===document.readyState?e():document.addEventListener("DOMContentLoaded",e)},{"./common/fav":2,"./common/handler":3,"./common/polling":4,"./common/popup":5,"./common/search":6,"./common/tabs":7,"./common/viewer":8,"./fixme":9,"./fw/api":10,"./fw/calibrations":11,"./fw/commands":12,"./fw/transfer":13,"./hw/menu":18,"./hw/registers":19,"./polyfill":25,"./ui/footer":26,"./ui/history":27,"./ui/options":28,"./ui/settings":29,"./ui/splitter":30,"./ui/tooltip":31,"./utils/ajax":32,"./utils/handy":35,"./utils/state":39}],25:[function(a,b,c){String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}),String.prototype.padLeft||(String.prototype.padLeft=function(){"use strict";var a=arguments[0];if("string"==typeof a){if(null===this||void 0===this)return a;var b=a.length;return(a+this).slice(-b)}return this}),String.prototype.padRight||(String.prototype.padRight=function(){"use strict";var a=arguments[0];if("string"==typeof a){if(null===this||void 0===this)return a;var b=a.length;return(this+a).substring(0,b)}return this}),String.prototype.endsWith||(String.prototype.endsWith=function(a,b){var c=this.toString(),d=b;(void 0===b||b>c.length)&&(d=c.length),d-=a.length;var e=c.indexOf(a,d);return e!==-1&&e===d}),Math.log2=Math.log2||function(a){return Math.log(a)/Math.LN2}},{}],26:[function(a,b,c){b.exports={loaded:function(){return document.addEventListener("click",function(a){var b=a.target;b.classList.contains("footer-link")&&document.dispatchEvent(new Event("act-popup-errors"))}),Promise.resolve()}}},{}],27:[function(a,b,c){var d=a("../utils/state").navigation;b.exports={loaded:function(){document.addEventListener("click",function(a){var b,c,e,f=a.target,g=null;"classList"in f&&(f.classList.contains("navigate-back")?(b=f.parentNode.parentNode.parentNode,b&&b.hasAttribute("type")&&(c=b.getAttribute("type"),g=d.getPrevious(c))):f.classList.contains("navigate-forward")&&(b=f.parentNode.parentNode.parentNode,b&&b.hasAttribute("type")&&(c=b.getAttribute("type"),g=d.getNext(c)))),g&&(e={detail:{name:g}},document.dispatchEvent(new CustomEvent("act-select-section",e)))})}}},{"../utils/state":39}],28:[function(a,b,c){function d(){}function e(a){return function(b){b.lengthComputable&&(a.value=b.loaded/b.total*100)}}function f(){document.dispatchEvent(new Event("act-fw-drop")),setTimeout(function(){m.setSelectedTab("hw"),setTimeout(l.returnToTab,50)},100)}function g(){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept",".json"),a.addEventListener("change",function(){var a=this.files[0];if(a.name.endsWith(".json")&&a.size>0){var b=k("#progress");b.classList.remove("hidden"),n.upload("/api",a,e(b)).then(function(){setTimeout(function(){window.location.reload(!0)},200)}).catch(function(a){o.ERROR(a)}).then(function(){b.classList.add("hidden")})}else o.ERROR("Wrong type of file"),k("#progress").classList.add("hidden")}),a.click()}function h(){m.clear(),document.dispatchEvent(new Event("act-clear-user-data"))}function i(){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept",".xml"),a.addEventListener("change",function(){var a=this.files[0];if("text/xml"===a.type&&a.size>0){var b=k("#progress");b.classList.remove("hidden"),n.upload("/xml",a,e(b)).then(function(){return document.dispatchEvent(new Event("act-fw-drop")),Promise.resolve()}).then(function(){setTimeout(function(){window.location.reload(!0)},400)}).catch(function(a){o.ERROR(a)}).then(function(){b.classList.add("hidden")})}else o.ERROR("Wrong type of file"),k("#progress").classList.add("hidden")}),a.click()}function j(){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept",".json"),a.addEventListener("change",function(){var a=this.files[0];if(a.name.endsWith(".json")&&a.size>0){var b=new FileReader;b.onload=function(a){try{var b,c=JSON.parse(a.target.result.toString());b={detail:c},document.dispatchEvent(new CustomEvent("act-load-hw-registers",b))}catch(a){o.ERROR("Bad JSON file")}},b.readAsText(a)}else o.ERROR("Wrong type of file")}),a.click()}var k=a("../utils/helper"),l=a("../utils/handy"),m=a("../utils/state"),n=a("../utils/ajax"),o=a("../common/handler");b.exports={loaded:function(){return k("#combine-multi-bytes").addEventListener("click",function(){this.checked?document.dispatchEvent(new Event("act-combine-hw-bytes")):document.dispatchEvent(new Event("act-split-hw-bytes")),l.isHardwareTabSelected()&&document.dispatchEvent(new Event("act-reload-visible"))}),k("#options-menu-button").addEventListener("click",function(a){if(0===a.button){var b=a.target;b.classList.add("activated"),k("#options-menu").classList.toggle("hidden")}}),document.addEventListener("click",function(a){function b(){k("#options-menu").classList.add("hidden"),k("#options-menu-button").classList.remove("activated")}if(0===a.button){var c=a.target;if(c.classList.contains("ask-opt-menu-item")){b();var e;switch(e={},c.id){case"drop-fw-api":e.detail={question:"Erase loaded FW API settings?",yes:f,no:d};break;case"reload-fw-api":m.api.exists()?e.detail={question:"Reload FW API settings?",yes:g,no:d}:(e=null,g());break;case"clear-user-data":e.detail={question:"Erase all local settings?",yes:h,no:d};break;case"upload-xml":e.detail={question:"This will reload Apical Control XML"+(m.api.exists()?" and discard FW API. ":". ")+"Proceed?",yes:i,no:d}}e&&document.dispatchEvent(new CustomEvent("act-ask-user",e))}else if(c.classList.contains("opt-menu-item"))switch(b(),c.id){case"open-settings":document.dispatchEvent(new Event("act-popup-settings"));break;case"about-act":document.dispatchEvent(new Event("act-popup-about"));break;case"save-hw-registers":document.dispatchEvent(new Event("act-save-hw-registers"));break;case"save-visible-hw-registers":document.dispatchEvent(new Event("act-save-visible-hw-registers"));break;case"load-hw-registers":j();break;case"save-static-calibrations":document.dispatchEvent(new Event("act-save-static-calibrations"));break;case"save-dynamic-calibrations":document.dispatchEvent(new Event("act-save-dynamic-calibrations"))}else if(c.classList.contains("opt-menu-link")){b();var l=c.getAttribute("target");window.open(l,"_blank").focus()}}}),Promise.resolve()}}},{"../common/handler":3,"../utils/ajax":32,"../utils/handy":35,"../utils/helper":36,"../utils/state":39}],29:[function(a,b,c){function d(a){var b=a.target;if(b.hasOwnProperty("classList")&&b.classList.contains("config")){var c=b.id,d=c.substring(4);switch(b.getAttribute("cfg-type")){case"boolean":e.setSetting(d,b.checked);break;case"number":var f=parseInt(b.value),g=parseInt(b.getAttribute("cfg-min")),h=parseInt(b.getAttribute("cfg-max"));isNaN(f)||f>h||f<g?b.value=b.getAttribute("original-value"):e.setSetting(d,f)}}}var e=a("../utils/state");b.exports={loaded:function(){return document.addEventListener("blur",d,!0),Promise.resolve()}}},{"../utils/state":39}],30:[function(a,b,c){var d=a("../utils/helper"),e=function(){};e.menu=null,e.drag=function(a){e.menu.style.width=a.clientX+"px"},e.stop=function(){window.removeEventListener("mousemove",e.drag),window.removeEventListener("mouseup",e.stop)},b.exports={loaded:function(){return e.menu=d(".left-pane"),d("div.splitter").addEventListener("mousedown",function(a){0===a.button&&(a.preventDefault(),window.addEventListener("mousemove",e.drag),window.addEventListener("mouseup",e.stop))}),document.addEventListener("click",function(a){if(0===a.button){var b=a.target;if(b.classList.contains("handle")){var c=d(".left-pane.hidden"),e=d(".splitter");c?(c.classList.remove("hidden"),c.style.width="200px",e.classList.remove("hidden")):(d(".left-pane").classList.add("hidden"),e.classList.add("hidden"))}}}),Promise.resolve()}}},{"../utils/helper":36}],31:[function(a,b,c){b.exports={loaded:function(){var a=document.querySelector(".main"),b=document.querySelector(".tooltip"),c=null,d=null,e=0,f=0;return document.addEventListener("mousemove",function(g){var h=g.target;if("hasAttribute"in h)if(h.hasAttribute("tooltip")){c&&clearTimeout(c),c=setTimeout(function(){b.classList.add("hidden")},1e4);var i=parseInt(g.clientX),j=parseInt(g.clientY),k=Math.abs(i-e),l=Math.abs(j-f);if(k*k+l*l<64)return;e=i,f=j,b.innerHTML=h.getAttribute("tooltip"),d&&clearTimeout(d),d=setTimeout(function(){b.classList.remove("hidden")},500);var m=parseInt(a.offsetWidth),n=parseInt(a.offsetHeight),o=parseInt(b.offsetWidth),p=parseInt(b.offsetHeight);i+o>m&&(i=m-o-20),j+p>n&&(j=n-p-20),b.style.left=i+"px",b.style.top=j+"px"}else h.classList.contains("hidden")||(b.classList.add("hidden"),e=0,f=0,d&&clearTimeout(d))}),Promise.resolve()}}},{}],32:[function(a,b,c){function d(a){var b,c="",d=!0;for(var e in a)if(a.hasOwnProperty(e)){if(b=a[e],null===b||void 0===b)continue;switch(d?d=!1:c+=";",typeof b){case"string":c+='"'+e+'":"'+b+'"';break;case"number":if(isNaN(b))continue;c+='"'+e+'":'+b.toString();break;case"object":if(Array.isArray(b)){var f=JSON.stringify(b);f=f.substring(1,f.length-1),c+='"'+e+'"#'+f}break;case"boolean":c+='"'+e+'":'+(b?"t":"f")}}return c}function e(a,b){var c=f.defer();return g.POST(a,b,function(d,e){if(d)c.reject(d);else{var h=e[0],i=e[1];if(200===h||202===h)try{var j=e[2];0===j.length?c.resolve({}):c.resolve(JSON.parse(j))}catch(a){c.reject("Malformed JSON in response")}else if(503===h){var k,l=f.defer();k={detail:{defer:l}},document.dispatchEvent(new CustomEvent("act-init-am",k)),l.promise.then(function(){var c=f.defer();return g.POST(a,b,function(a,b){if(a)c.reject(a);else{var d=b[0],e=b[1];if(200===d||202===d)try{var f=b[2];0===f.length?c.resolve({}):c.resolve(JSON.parse(f))}catch(a){c.reject("Malformed JSON in response")}else c.reject(e)}}),c.promise}).then(function(a){c.resolve(a)}).catch(function(a){c.reject("Failed to initialize access manager: "+a)})}else c.reject(i)}}),c.promise}var f=a("../utils/promise"),g=a("../utils/network");b.exports={get:function(a){var b=f.defer();return g.GET(a,function(a,c){if(a)b.reject(a);else if(200===c[0])try{b.resolve(JSON.parse(c[2]))}catch(a){b.reject("Malformed JSON in response")}else b.reject(c[1])}),b.promise},upload:function(a,b,c){var d=f.defer();return g.UPLOAD(a,b,function(a,b){a?d.reject(a):200===b[0]?d.resolve(b[0]):d.reject(b[1])},c),d.promise},hwRead:function(a,b,c,f,g){var h=(g?"http://"+g+"/":"/")+"hw/read";return e(h,d({type:b,offset:c,size:f})).then(function(b){if(a){var c;return c={detail:{command:a,bytes:b.bytes}},document.dispatchEvent(new CustomEvent("act-hw-value-changed",c)),Promise.resolve()}return Promise.resolve(b.bytes)})},hwPoll:function(a){var b,c=[];for(var f in a)a.hasOwnProperty(f)&&(b=a[f],c.push(f,b.type,b.offset,b.size));return 0===c.length?Promise.resolve():e("/hw/poll",d({data:c})).then(function(a){var b;for(var c in a)if(a.hasOwnProperty(c)){if(b=a[c],"string"!=typeof c||!Array.isArray(b))return Promise.reject("Bad response for poll request");var d;d={detail:{command:c,bytes:b}},document.dispatchEvent(new CustomEvent("act-hw-value-changed",d))}return Promise.resolve()})},hwWrite:function(a,b,c,f,g){return e("/hw/write",d({type:b,offset:c,data:f,mask:g})).then(function(b){if(a){var c;return c={detail:{command:a,bytes:b.bytes}},document.dispatchEvent(new CustomEvent("act-hw-value-changed",c)),Promise.resolve()}return Promise.resolve(b.bytes)})},fwGet:function(a,b,c){return e("/fw/get",d({sec:a,cmd:b})).then(function(d){if(c)return Promise.resolve(d.val);var e;return e={detail:{section:a,command:b,value:d.val}},document.dispatchEvent(new CustomEvent("act-api-value-changed",e)),Promise.resolve()})},fwPoll:function(a){var b,c=[];for(var f in a)a.hasOwnProperty(f)&&(b=a[f],c.push(b.section,b.command));return 0===c.length?Promise.resolve():e("/fw/poll",d({data:c})).then(function(a){var b;for(var c in a)if(a.hasOwnProperty(c)){if(b=a[c],"number"!=typeof b)return Promise.reject("Bad response for poll request");var d,e=c.split(":");d={detail:{section:parseInt(e[0]),command:parseInt(e[1]),value:b}},document.dispatchEvent(new CustomEvent("act-api-value-changed",d))}return Promise.resolve()})},fwSet:function(a,b,c){return e("/fw/set",d({sec:a,cmd:b,page:c})).then(function(){var d;return d={detail:{section:a,command:b,value:c}},document.dispatchEvent(new CustomEvent("act-api-value-changed",d)),Promise.resolve()})},fwGetPage:function(a,b,c){return e("/fw/get",d({sec:a,cmd:b,page:c})).then(function(a){return Promise.resolve(a.val)})},fwLoadArray:function(a,b,c){return e("/calibration/load",d({page:a,size:b})).then(function(b){var d;return d={detail:{page:a,bytes:b.val}},c||document.dispatchEvent(new CustomEvent("act-calibration-value-changed",d)),Promise.resolve(b.val)})},fwSaveArray:function(a,b){return e("/calibration/save",d({page:a,data:b}))},fwDeleteApi:function(){var a=f.defer();return g.DELETE("/api",function(b){b?a.reject(b):a.resolve()}),a.promise},initAM:function(a,b,c){return e("/am",d({doff:a,boff:b,size:c,init:!0}))},fileDownload:function(a,b){var c=f.defer();return g.POST("/file/download","",function(a,b){if(a)c.reject(a);else if(200===b[0])try{var d=JSON.parse(b[2]);c.resolve(d.file)}catch(a){c.reject("Malformed JSON in response")}else c.reject(b[1])},{"act-file-section":a,"act-file-command":b}),c.promise},fileUpload:function(a,b,c){var d=f.defer();return g.POST("/file/upload",c,function(a){a?d.reject(a):d.resolve()},{"act-file-section":a,"act-file-command":b}),d.promise}}},{"../utils/network":37,"../utils/promise":38}],33:[function(a,b,c){function d(a,b){return!!(isNaN(a)||isNaN(b)||b%8!==0||b<0)||!!(a>b||a<0)}function e(a,b,c){for(var d=[],e=0;e<c;e+=8)e>b?d.push(0):d.push(a>>e&255);return d}function f(a,b,c,d){for(var e=0,f=0;f<c;f+=8)e|=a[d]<<f,d++;return e=(e&b)>>>0}b.exports={itemToBytes:function(a,b,c){return d(b,c)?null:e(a,b,c)},bytesToItem:function(a,b,c){if(d(b,c)||8*a.length!=c)return null;var e=parseInt(Math.pow(2,b))-1;return f(a,e,c,0)},bytesToItem2:f,arrayToBytes:function(a,b,c){if(d(b,c))return null;var f=[];return a.forEach(function(a){Array.prototype.push.apply(f,e(a,b,c))}),f},bytesToArray:function(a,b,c){if(d(b,c))return null;for(var e=[],g=a.length,h=parseInt(Math.pow(2,b))-1,i=c>>>3,j=0;j<g;j+=i)e.push(f(a,h,c,j));return e}}},{}],34:[function(a,b,c){var d=a("../utils/state");b.exports={save:function(a,b,c){var e=document.createElement("a");e.download=a;var f;f="application/json"===b&&"object"==typeof c?new Blob([d.fancyJSON()?JSON.stringify(c,null,2):JSON.stringify(c)],{type:b}):new Blob([c],{type:b});var g=window.URL.createObjectURL(f);e.href=g,e.style.display="hidden",document.body.appendChild(e),e.click(),window.setTimeout(function(){document.body.removeChild(e),window.URL.revokeObjectURL(g)},6e4)},saveURL:function(a,b){var c=document.createElement("a");c.download=a,c.href=b,c.style.display="none",document.body.appendChild(c),c.click(),window.setTimeout(function(){document.body.removeChild(c),window.URL.revokeObjectURL(b)},6e4)}}},{"../utils/state":39}],35:[function(a,b,c){var d=a("../utils/helper"),e=a("../utils/state");b.exports.returnToTab=function(){var a=d('input.tab-radio[value="'+e.getSelectedTab()+'"]');a?(a.checked=!0,a.dispatchEvent(new Event("change"))):Array.prototype.slice.call(d.$("div.container")).forEach(function(a){a.classList.add("hidden")})},b.exports.hideMenus=function(){Array.prototype.slice.call(d.$("ul.menu")).forEach(function(a){a.classList.add("hidden")}),d("div.menu-top").classList.add("hidden"),Array.prototype.slice.call(d.$("input.tab-radio[name=tabs]")).forEach(function(a){a.checked=!1})},b.exports.clearMenuItemSelection=function(){Array.prototype.slice.call(d.$(".selected-item")).forEach(function(a){a.classList.remove("selected-item")}),d("#options-menu").classList.add("hidden"),d("#options-menu-button").classList.remove("activated")},b.exports.showTab=function(a){var b=d('input.tab-radio[value="'+a+'"]');b&&(b.checked=!0,b.dispatchEvent(new Event("change")))},b.exports.hideSections=function(){Array.prototype.slice.call(d.$("section.section:not(.hidden)")).forEach(function(a){a.classList.add("hidden"),a.classList.remove("in-common")})},b.exports.isHardwareTabSelected=function(){return null===d("div.hw-controls.hidden")},b.exports.isApiTabSelected=function(){return null===d("div.api-controls.hidden")}},{"../utils/helper":36,"../utils/state":39}],36:[function(a,b,c){b.exports=document.querySelector.bind(document),b.exports.$=document.querySelectorAll.bind(document)},{}],37:[function(a,b,c){function d(a){var b=new XMLHttpRequest;return b.onload=function(){"function"==typeof a&&a(null,[parseInt(this.status),this.statusText,this.responseText])},b.onerror=function(){"function"==typeof a&&a("Network error")},b}b.exports={GET:function(a,b){var c=d(b);c.open("GET",a),c.send()},POST:function(a,b,c,e){var f=d(c);if(f.open("POST",a),e)for(var g in e)e.hasOwnProperty(g)&&f.setRequestHeader(g,e[g]);f.send(b)},UPLOAD:function(a,b,c,e){var f=d(c);"function"==typeof e&&(f.upload.onprogress=e),f.open("POST",a),f.send(b)},DELETE:function(a,b){var c=d(b);c.open("DELETE",a),c.send()}}},{}],38:[function(a,b,c){b.exports.defer=function(){var a={};return a.promise=new Promise(function(b,c){a.resolve=b,a.reject=c}),a}},{}],39:[function(a,b,c){function d(){}d.namespace="act/3.1",d.fw={},d.fw.api={},d.fw.exists=!1,d.options={beforeunload:!0},d.navigation={hw:{history:[],pointer:null},api:{history:[],pointer:null},static:{history:[],pointer:null},dynamic:{history:[],pointer:null},file:{history:[],pointer:null}},b.exports={saveStarredRegisters:function(a){Array.isArray(a)?localStorage[d.namespace+"/starred/registers"]=JSON.stringify(a):localStorage[d.namespace+"/starred/registers"]="[]"},loadStarredRegisters:function(){var a=localStorage[d.namespace+"/starred/registers"];try{var b=JSON.parse(a);if(Array.isArray(b))return b}catch(a){}return localStorage[d.namespace+"/starred/registers"]="[]",[]},saveStarredPages:function(a){Array.isArray(a)?localStorage[d.namespace+"/starred/pages"]=JSON.stringify(a):localStorage[d.namespace+"/starred/pages"]="[]"},loadStarredPages:function(){var a=localStorage[d.namespace+"/starred/pages"];try{var b=JSON.parse(a);if(Array.isArray(b))return b}catch(a){}return localStorage[d.namespace+"/starred/pages"]="[]",[]},hw:{setSelectedSectionName:function(a){localStorage[d.namespace+"/last-section/hw"]=a},hasSelectedSection:function(){return localStorage.hasOwnProperty(d.namespace+"/last-section/hw")},getSelectedSectionName:function(){return localStorage[d.namespace+"/last-section/hw"]}},api:{setSelectedSectionName:function(a){localStorage[d.namespace+"/last-section/api"]=a},hasSelectedSection:function(){return localStorage.hasOwnProperty(d.namespace+"/last-section/api")},getSelectedSectionName:function(){return localStorage[d.namespace+"/last-section/api"]},cache:function(a){d.fw.api=a,d.fw.exists=!0},exists:function(){return d.fw.exists},get:function(){return d.fw.api},drop:function(){d.fw.api={},d.fw.exists=!1}},cstatic:{setSelectedSectionName:function(a){localStorage[d.namespace+"/last-section/static"]=a},hasSelectedSection:function(){return localStorage.hasOwnProperty(d.namespace+"/last-section/static")},getSelectedSectionName:function(){return localStorage[d.namespace+"/last-section/static"]}},cdynamic:{setSelectedSectionName:function(a){localStorage[d.namespace+"/last-section/dynamic"]=a},hasSelectedSection:function(){return localStorage.hasOwnProperty(d.namespace+"/last-section/dynamic")},getSelectedSectionName:function(){return localStorage[d.namespace+"/last-section/dynamic"]}},file:{setSelectedSectionName:function(a){localStorage[d.namespace+"/last-section/file"]=a},hasSelectedSection:function(){return localStorage.hasOwnProperty(d.namespace+"/last-section/file")},getSelectedSectionName:function(){return localStorage[d.namespace+"/last-section/file"]}},setSelectedTab:function(a){localStorage[d.namespace+"/tabs/selected"]=a},getSelectedTab:function(){var a=localStorage[d.namespace+"/tabs/selected"];return["hw","api","static","dynamic","file"].indexOf(a)>=0?a:(localStorage[d.namespace+"/tabs/selected"]="hw","hw")},clear:function(){for(var a in localStorage)localStorage.hasOwnProperty(a)&&0===a.indexOf(d.namespace+"/")&&delete localStorage[a];d.options.beforeunload=!1},mayBeforeUnload:function(){return d.options.beforeunload},getPollingPace:function(){var a=d.namespace+"/settings/polling-pace";if(localStorage.hasOwnProperty(a)){var b=parseInt(localStorage[a]);return b>=100?b:(localStorage[a]="100",100)}return 500},fancyJSON:function(){var a=d.namespace+"/settings/fancy-json";return!localStorage.hasOwnProperty(a)||JSON.parse(localStorage[a])},setSetting:function(a,b){var c=d.namespace+"/settings/"+a,e=typeof b;switch(e){case"number":localStorage[c]=b.toString();break;case"boolean":localStorage[c]=!!b}},__get_namespace:function(){return d.namespace},navigation:{addStep:function(a,b){var c=d.navigation[a];if(c){var e=c.history.indexOf(b);e<0?(c.history.push(b),c.pointer=c.history.indexOf(b)):c.pointer=e}},getPrevious:function(a){var b=d.navigation[a];return b?null===b.pointer?null:b.pointer>0?b.history[b.pointer-1]:null:null},getNext:function(a){var b=d.navigation[a];return b?null===b.pointer?null:b.pointer<b.history.length-1?b.history[b.pointer+1]:null:null}}}},{}],40:[function(a,b,c){var d=a("../utils/ajax");b.exports=function(a){a.onmessage=function(b){var c=b.data,e=c.base,f=c.commands,g=(f.length,[]),h=f.filter(function(a){return null!==a}).map(function(b,c){return d.hwRead(null,b.type,b.offset,b.size,e).then(function(d){g.push({name:b.name,bytes:d}),a.postMessage({progress:c})})});Promise.all(h).then(function(){a.postMessage({done:!0,results:g})}).catch(function(b){a.postMessage({error:b})}).then(function(){close()})}}},{"../utils/ajax":32}]},{},[24]);